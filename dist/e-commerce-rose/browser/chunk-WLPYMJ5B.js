import{Eb as g,L as a,R as d,X as l,ca as y,da as b,ea as m,g as v,ja as f}from"./chunk-XFMLYWXN.js";function p(r,e){let o=!e?.manualCleanup;o&&!e?.injector&&l(p);let u=o?e?.injector?.get(b)??d(b):null,c=h(e?.equal),n;e?.requireSync?n=f({kind:0},{equal:c}):n=f({kind:1,value:e?.initialValue},{equal:c});let s,i=r.subscribe({next:t=>n.set({kind:1,value:t}),error:t=>{if(e?.rejectErrors)throw t;n.set({kind:2,error:t})},complete:()=>{s?.()}});if(e?.requireSync&&n().kind===0)throw new a(601,!1);return s=u?.onDestroy(i.unsubscribe.bind(i)),g(()=>{let t=n();switch(t.kind){case 1:return t.value;case 2:throw t.error;case 0:throw new a(601,!1)}},{equal:e?.equal})}function h(r=Object.is){return(e,o)=>e.kind===1&&o.kind===1&&r(e.value,o.value)}function w(r){r===void 0&&(l(w),r=d(y));let e=r.get(m);return o=>new v(u=>{let c=e.add(),n=!1;function s(){n||(c(),n=!0)}let i=o.subscribe({next:t=>{u.next(t),s()},complete:()=>{u.complete(),s()},error:t=>{u.error(t),s()}});return i.add(()=>{u.unsubscribe(),s()}),i})}export{p as a,w as b};
