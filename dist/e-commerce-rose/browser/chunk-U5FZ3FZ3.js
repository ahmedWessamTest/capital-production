import{a as ie}from"./chunk-SYITCFZP.js";import{e as te}from"./chunk-MJN5VWZP.js";import"./chunk-WLPYMJ5B.js";import"./chunk-U6POVDGM.js";import{c as Q,d as M,f as P,g as A,i as D,o as ee}from"./chunk-QZHVMEMD.js";import{Bb as B,Da as b,Ga as c,Hb as $,Ib as q,Ja as I,Jb as R,Pb as V,R as g,Ra as o,Sa as r,Ta as m,Tb as Y,Ua as y,Ub as G,Va as C,Wa as N,Xa as O,Ya as _,Z as w,_ as S,a as v,b as h,eb as l,fb as E,gb as d,ka as k,lc as H,mc as J,nb as L,ob as T,pa as z,pb as U,qb as F,rc as K,ta as a,tb as u,tc as W,ub as f,uc as X,vc as Z,ya as j}from"./chunk-XFMLYWXN.js";var ae=()=>[1,2,3],re=(n,t)=>({"bg-[#30B479]":n,"bg-red-600":t}),oe=n=>({"max-w-[125px]":n}),se=n=>({"!text-red-600":n}),le=(n,t,e)=>["/",n,"claims",t,e,"comments"];function ce(n,t){n&1&&(o(0,"div",12)(1,"div",13)(2,"div",14),m(3,"div",15)(4,"div",16),r(),m(5,"div",17),r(),o(6,"div",18)(7,"div"),m(8,"div",19)(9,"div",20),r(),o(10,"div"),m(11,"div",19)(12,"div",20),r(),o(13,"div",21),m(14,"div",19)(15,"div",20),r()(),o(16,"div",22),m(17,"div",23),r()())}function de(n,t){n&1&&(o(0,"div",10),b(1,ce,18,0,"div",11),r()),n&2&&(a(),c("ngForOf",L(1,ae)))}function me(n,t){n&1&&(y(0),o(1,"div",27),l(2),u(3,"translate"),r(),C()),n&2&&(a(2),d(" ",f(3,1,"pages.user_policies.no_data")," "))}function pe(n,t){n&1&&(o(0,"div",39),l(1),u(2,"translate"),r()),n&2&&(a(),d(" ",f(2,1,"pages.claims.status.pending")," "))}function ge(n,t){if(n&1&&(y(0),o(1,"div",28),b(2,pe,3,3,"div",29),o(3,"div",13)(4,"div")(5,"div",14),m(6,"div",30),l(7),r(),o(8,"div",31),l(9),r()(),o(10,"div",32),m(11,"img",33),r()(),o(12,"div",18)(13,"div")(14,"div",34),l(15),u(16,"translate"),r(),o(17,"div",35),l(18),r()(),o(19,"div")(20,"div",34),l(21),u(22,"translate"),r(),o(23,"div",35),l(24),r()(),o(25,"div",21)(26,"div",34),l(27),u(28,"translate"),r(),o(29,"div",36),l(30),r()()(),o(31,"div",22)(32,"button",37),u(33,"async"),l(34),r()(),m(35,"img",38),r(),C()),n&2){let e=t.$implicit,i=_(2);a(2),c("ngIf",e.status==="pending"),a(4),c("ngClass",U(24,re,e.status==="pending"||e.status==="requested"||e.status==="confirmed",e.status==="canceled")),a(),d(" ",i.getClaimTypeName(e.type)," "),a(2),d(" ",i.getClaimStatus(e)," "),a(2),c("ngClass",e.type==="motor"?"object-contain":"object-cover")("src",e.type==="medical"?"/assets/policies/medical.png":e.type==="motor"?"/assets/policies/car.png":e.type==="jop"?"/assets/policies/job.webp":"/assets/policies/building.png",z)("ngClass",T(27,oe,e.type=="jop")),a(4),d(" ",f(16,16,"pages.claims.labels.claimant")," "),a(3),E(e.name),a(3),d(" ",f(22,18,"pages.claims.labels.claim_number")," "),a(3),E(e.claim_number),a(3),d(" ",f(28,20,"pages.claims.labels.claim_date")," "),a(2),c("ngClass",T(29,se,e.status!=="pending"&&e.status!=="requested")),a(),d(" ",i.formatDisplayDate(e.created_at)," "),a(2),c("routerLink",F(31,le,f(33,22,i.currentLang$),e.id,e.type==="jop"?"job":e.type)),a(2),d(" ",i.lang=="ar"?"\u0627\u0630\u0647\u0628 \u0627\u0644\u064A \u0627\u0644\u062A\u0639\u0644\u064A\u0642\u0627\u062A":"Go to comments"," ")}}function ue(n,t){if(n&1){let e=N();y(0),o(1,"div",24)(2,"button",25),O("click",function(){w(e);let s=_();return S(s.switchTab("open"))}),l(3),r(),o(4,"button",25),O("click",function(){w(e);let s=_();return S(s.switchTab("closed"))}),l(5),r()(),b(6,me,4,3,"ng-container",6)(7,ge,36,35,"ng-container",26),C()}if(n&2){let e=_();a(2),I(e.activeTab==="open"?"select-btn active w-1/2 relative":"select-btn w-1/2 relative"),a(),d(" ",e.lang=="ar"?"\u0627\u0644\u062D\u0627\u0644\u064A":"Current"," "),a(),I(e.activeTab==="closed"?"select-btn active w-1/2 relative":"select-btn w-1/2 relative"),a(),d(" ",e.lang=="ar"?"\u0627\u0644\u0633\u0627\u0628\u0642":"Previous"," "),a(),c("ngIf",e.getAllClaimsSorted().length===0),a(),c("ngForOf",e.getAllClaimsSorted())}}var ne=class n{activeTab="open";claims={user:null,medical:[],motor:[],building:[],jop:[]};isLoading=!0;pendingCount=0;claimsService=g(ie);authService=g(te);platformId=g(k);router=g(H);cdr=g(B);_languageService=g(ee);translate=g(W);claimTypes=["medical","motor","building","jop"];currentLang$=this._languageService.currentLanguage$;lang="en";ngOnInit(){if(G(this.platformId)){if(!this.authService.isAuthenticated()){this.router.navigate(["/",this._languageService.getCurrentLanguage()]);return}this.fetchClaims()}this._languageService.currentLanguage$.subscribe(t=>{this.lang=t,this.cdr.markForCheck()})}fetchClaims(){let t=+this.authService.getUserId();if(!t){this.isLoading=!1;return}this.isLoading=!0,this.claimsService.getUserClaims(t).subscribe({next:e=>{this.claims=e,this.pendingCount=this.calculatePendingCount(),this.isLoading=!1},error:()=>{this.isLoading=!1}})}calculatePendingCount(){return[...this.claims.medical.filter(t=>t.status==="pending"||t.status==="requested"),...this.claims.motor.filter(t=>t.status==="pending"||t.status==="requested"),...this.claims.building.filter(t=>t.status==="pending"||t.status==="requested"),...this.claims.jop.filter(t=>t.status==="pending"||t.status==="requested")].length}switchTab(t){this.activeTab=t}formatInputDate(t){if(!t)return null;let e=new Date(t);if(!isNaN(e.getTime()))return e;let i=t.split(/[-\/]/),s,p,x;if(i[0].length===4)[s,p,x]=i.map(Number);else if(i[2].length===4)[x,p,s]=i.map(Number);else return null;return isNaN(s)||isNaN(p)||isNaN(x)?null:(e=new Date(s,p-1,x),isNaN(e.getTime())?null:e)}formatDisplayDate(t){let e=this.formatInputDate(t);if(!e)return"N/A";let i=e.getDate().toString().padStart(2,"0"),s=e.toLocaleString("en-US",{month:"long"}),p=e.getFullYear();return`${i}, ${s} ${p}`}getAllClaimsSorted(){return[...this.claims.medical.map(i=>h(v({},i),{type:"medical"})),...this.claims.motor.map(i=>h(v({},i),{type:"motor"})),...this.claims.building.map(i=>h(v({},i),{type:"building"})),...this.claims.jop.map(i=>h(v({},i),{type:"jop"}))].filter(i=>{let s=i.status==="pending"||i.status==="requested";return this.activeTab==="open"?s:i.status==="confirmed"||i.status==="canceled"||i.status==="expired"}).sort((i,s)=>{let p=this.formatInputDate(i.created_at)||new Date(0);return(this.formatInputDate(s.created_at)||new Date(0)).getTime()-p.getTime()})}getClaimStatus(t){return this.translate.instant(`pages.claims.status.${t.status}`)}getClaimTypeName(t){return this.translate.instant(`pages.claims.types.${t}`)}getClaimCode(t,e){return t.claim_number}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=j({type:n,selectors:[["app-user-claims"]],decls:10,vars:3,consts:[[1,"min-h-screen","my-2","bg-white","p-4","sm:p-6"],[1,"max-w-7xl","mx-auto"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-6","lg:gap-8"],[1,"space-y-4","sm:space-y-6"],[1,"space-y-3","sm:space-y-4"],["class","space-y-3",4,"ngIf"],[4,"ngIf"],[1,"hidden","lg:block","sticky","top-6","self-start"],[1,"w-full","max-h-[600px]","rounded-4xl","overflow-hidden"],["src","assets/claims/claims-img.jpg","alt","",1,"w-full","h-full","object-cover"],[1,"space-y-3"],["class","card relative animate-pulse",4,"ngFor","ngForOf"],[1,"card","relative","animate-pulse"],[1,"status","flex","justify-between","items-center","flex-wrap"],[1,"flex","gap-2","items-center"],[1,"status-dot","bg-gray-300","w-4","h-4","rounded-full"],[1,"h-6","w-32","bg-gray-200","rounded"],[1,"w-[170px]","h-[70px]","bg-gray-200","rounded"],[1,"info-grid"],[1,"label","h-4","w-20","bg-gray-200","rounded"],[1,"value","h-5","w-40","bg-gray-200","rounded"],[1,"expiry"],[1,"flex","items-center","gap-2","justify-between"],[1,"h-8","w-32","bg-gray-200","rounded"],[1,"flex","gap-2","w-full"],[3,"click"],[4,"ngFor","ngForOf"],[1,"text-center","text-gray-500","text-lg","py-8"],[1,"card","relative"],["class","absolute top-0 right-0 bg-yellow-400 text-black text-sm font-semibold px-3 py-1 rounded-bl-lg z-30 transform -rotate-2 shadow-md",4,"ngIf"],[1,"status-dot",3,"ngClass"],[1,"subtext"],[1,"w-[170px]","h-[85px]","z-20","text-center","flex","justify-center"],["alt","",1,"w-full","h-full","object-cover",3,"ngClass","src"],[1,"label"],[1,"value"],[1,"value",3,"ngClass"],[1,"show-all-details","w-full","md:w-1/2",3,"routerLink"],["src","/assets/policies/card-policy-bg.svg","alt","Background",1,"car-img","absolute","-top-5","-end-5","w-[180px]","z-10","h-[180px]"],[1,"absolute","top-0","right-0","bg-yellow-400","text-black","text-sm","font-semibold","px-3","py-1","rounded-bl-lg","z-30","transform","-rotate-2","shadow-md"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),b(5,de,2,2,"div",5)(6,ue,8,8,"ng-container",6),r()(),o(7,"div",7)(8,"div",8),m(9,"img",9),r()()()()()),e&2&&(c("@fadeInOut",i.isLoading?"loading":"loaded"),a(5),c("ngIf",i.isLoading),a(),c("ngIf",!i.isLoading))},dependencies:[Y,$,q,R,V,K,J,Z,X],styles:[".show-details-btn[_ngcontent-%COMP%]{width:50%;height:80px;flex-shrink:0;color:#fff;font-family:Alexandria;font-size:23px;font-style:normal;font-weight:400;line-height:65px;text-transform:capitalize}.select-btn[_ngcontent-%COMP%]{flex-shrink:0;border-radius:15px;color:#676767;font-family:Alexandria;font-size:clamp(18px,1.5vw,23px);font-style:normal;font-weight:500;text-transform:capitalize;padding:1rem 3rem;box-shadow:0 4px 4px #00000040}.select-btn.active[_ngcontent-%COMP%]{background:#37a6de;color:#fff}.renew-now[_ngcontent-%COMP%]{border-radius:30px;border:1px solid #37A6DE;background:#fff;padding:1rem 3rem;box-shadow:0 4px 4px #00000040;color:#37a6de;font-family:Alexandria;font-size:clamp(18px,1.5vw,23px);font-style:normal;font-weight:400;text-transform:capitalize;width:50%;transition:.4s}.renew-now[_ngcontent-%COMP%]:hover{background-color:#199be0;color:#fff}.card[_ngcontent-%COMP%]{padding:2rem;border-radius:15px;border:1px solid rgba(103,103,103,0);box-shadow:0 4px 4px #00000040;overflow:hidden}.card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#000;text-align:center;font-family:Alexandria;font-size:23px;font-style:normal;font-weight:500;line-height:22px;text-transform:capitalize}.status[_ngcontent-%COMP%]{color:#000;font-family:Alexandria;font-size:16px;font-style:normal;font-weight:300;line-height:22px;text-transform:capitalize}.status-dot[_ngcontent-%COMP%]{width:10px;height:10px;border-radius:50%}.subtext[_ngcontent-%COMP%]{color:#555;margin-bottom:16px;margin-top:1rem}.info-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:2rem;margin-bottom:12px;justify-content:start}.label[_ngcontent-%COMP%]{color:#3c3c3c;font-family:Alexandria;font-size:16px;font-style:normal;font-weight:300;line-height:22px;text-transform:capitalize}.value[_ngcontent-%COMP%]{color:#000;font-family:Alexandria;font-size:18px;font-style:normal;font-weight:400;line-height:22px;margin-top:.8rem;text-transform:capitalize}.expiry[_ngcontent-%COMP%]{margin-bottom:20px}.show-all-details[_ngcontent-%COMP%]{padding:clamp(1rem,1vw,2rem) clamp(1rem,2vw,3rem);flex-shrink:0;border-radius:30px;background:#37a6de;color:#fff;font-family:Alexandria;font-size:clamp(18px,1.5vw,23px);font-style:normal;font-weight:400;text-transform:capitalize;transition:.4s}.show-all-details[_ngcontent-%COMP%]:hover{background-color:#199be0}.policy-type[_ngcontent-%COMP%]{color:#000;text-align:center;font-family:Alexandria;font-size:23px;font-style:normal;font-weight:500;line-height:22px;text-transform:capitalize}"],data:{animation:[Q("fadeInOut",[A("loading",P({opacity:.7})),A("loaded",P({opacity:1})),D("loading => loaded",[M("0.5s ease-in")]),D("loaded => loading",[M("0.3s ease-out")])])]}})};export{ne as UserClaimsComponent};
