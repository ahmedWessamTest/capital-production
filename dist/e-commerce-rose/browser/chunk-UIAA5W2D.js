import{$b as p,F as o,K as c,N as _,R as m,a as g,b,g as i,i as n,ja as s,q as r,r as l,wc as d}from"./chunk-XFMLYWXN.js";var C=class u{_http=m(p);baseUrl=d.BASE_URL;CACHE_EXPIRATION=5*60*1e3;homeDataCache=s(null);aboutDataCache=s(null);contactDataCache=s(null);claimInfoCache=s(null);aboutDownloadCache=s(null);slidersCache=s(null);testimonialsCache=s(null);categoriesCache=s(null);featuresCache=s(null);countersCache=s(null);partnersCache=s(null);cacheTimestamps=s({homeData:0,aboutData:0,contactData:0,claimInfo:0,aboutDownload:0,sliders:0,testimonials:0,categories:0,features:0,counters:0,partners:0});homeDataSubject=new n(null);aboutDataSubject=new n(null);contactDataSubject=new n(null);claimInfoSubject=new n(null);aboutDownloadSubject=new n(null);slidersSubject=new n(null);testimonialsSubject=new n(null);categoriesSubject=new n(null);featuresSubject=new n(null);countersSubject=new n(null);partnersSubject=new n(null);homeData$=this.homeDataSubject.asObservable();aboutData$=this.aboutDataSubject.asObservable();contactData$=this.contactDataSubject.asObservable();claimInfo$=this.claimInfoSubject.asObservable();aboutDownload$=this.aboutDownloadSubject.asObservable();sliders$=this.slidersSubject.asObservable();testimonials$=this.testimonialsSubject.asObservable();categories$=this.categoriesSubject.asObservable();features$=this.featuresSubject.asObservable();counters$=this.countersSubject.asObservable();partners$=this.partnersSubject.asObservable();policyType=null;get homeData(){return this.homeDataCache}get counters(){return this.countersCache}get aboutData(){return this.aboutDataCache}get contactData(){return this.contactDataCache}get claimInfo(){return this.claimInfoCache}get aboutDownload(){return this.aboutDownloadCache}get sliders(){return this.slidersCache}get testimonials(){return this.testimonialsCache}get categories(){return this.categoriesCache}get features(){return this.featuresCache}get partners(){return this.partnersCache}isBrowser(){return typeof window<"u"}ngOnChanges(e){e.policyType&&this.isBrowser()&&this.getPartners().subscribe()}fetchAllData(){this.isBrowser()}getHomeData(){if(!this.isBrowser())return new i(t=>{t.complete()});if(this.isCacheValid("homeData")&&this.homeDataCache()){let t=this.homeDataCache();return this.homeDataSubject.next(t),this.partnersSubject.next(t.partners),r(t)}return this._http.get(`${this.baseUrl}app-home/getHomeData`).pipe(c(t=>{this.homeDataCache.set(t),this.updateCacheTimestamp("homeData"),this.homeDataSubject.next(t)}),o(1))}getAboutData(){if(!this.isBrowser())return new i(t=>{t.complete()});if(this.isCacheValid("aboutData")&&this.aboutDataCache()){let t=this.aboutDataCache();return this.aboutDataSubject.next(t),r(t)}return this._http.get(`${this.baseUrl}app-home/getAboutData`).pipe(c(t=>{this.aboutDataCache.set(t),this.updateCacheTimestamp("aboutData"),this.aboutDataSubject.next(t)}),o(1))}getContactData(){if(!this.isBrowser())return new i(t=>{t.complete()});if(this.isCacheValid("contactData")&&this.contactDataCache()){let t=this.contactDataCache();return this.contactDataSubject.next(t),r(t)}return this._http.get(`${this.baseUrl}app-home/getContactData`).pipe(c(t=>{this.contactDataCache.set(t),this.updateCacheTimestamp("contactData"),this.contactDataSubject.next(t)}),o(1))}getClaimInfo(e){if(!this.isBrowser())return new i(a=>{a.complete()});if(this.isCacheValid("claimInfo")&&this.claimInfoCache()){let a=this.claimInfoCache();return this.claimInfoSubject.next(a),r(a)}return this._http.get(`${this.baseUrl}claim-info/${e}`).pipe(l(a=>a.data),c(a=>{this.claimInfoCache.set(a),this.updateCacheTimestamp("claimInfo"),this.claimInfoSubject.next(a)}),o(1))}getClaimInfoOnce(e){return this._http.get(`${this.baseUrl}claim-info/${e}`).pipe(l(t=>t.data))}getAboutDownload(){if(!this.isBrowser())return new i(t=>{t.complete()});if(this.isCacheValid("aboutDownload")&&this.aboutDownloadCache()){let t=this.aboutDownloadCache();return this.aboutDownloadSubject.next(t),r(t)}return this._http.get(`${this.baseUrl}about-download`).pipe(l(t=>t.data),c(t=>{this.aboutDownloadCache.set(t),this.updateCacheTimestamp("aboutDownload"),this.aboutDownloadSubject.next(t)}),o(1))}getSliders(){if(!this.isBrowser())return new i(e=>{e.complete()});if(this.isCacheValid("sliders")&&this.slidersCache()){let e=this.slidersCache();return this.slidersSubject.next(e),r(e)}return this.getHomeData().pipe(l(e=>e.slider),c(e=>{this.slidersCache.set(e),this.updateCacheTimestamp("sliders"),this.slidersSubject.next(e)}),o(1))}getCounters(){if(!this.isBrowser())return new i(e=>{e.complete()});if(this.isCacheValid("counters")&&this.countersCache()){let e=this.countersCache();return this.countersSubject.next(e),r(e)}return this.getHomeData().pipe(l(e=>e.counters),c(e=>{this.countersCache.set(e),this.updateCacheTimestamp("counters"),this.countersSubject.next(e)}),o(1))}getTestimonials(){if(!this.isBrowser())return new i(t=>{t.complete()});if(this.isCacheValid("testimonials")&&this.testimonialsCache()){let t=this.testimonialsCache();return this.testimonialsSubject.next(t),r(t)}return this._http.get(`${this.baseUrl}testimonials`).pipe(l(t=>t.data),c(t=>{this.testimonialsCache.set(t),this.updateCacheTimestamp("testimonials"),this.testimonialsSubject.next(t)}),o(1))}getCategories(){if(!this.isBrowser())return new i(e=>{e.complete()});if(this.isCacheValid("categories")&&this.categoriesCache()){let e=this.categoriesCache();return this.categoriesSubject.next(e),r(e)}return this.getHomeData().pipe(l(e=>e.categories),c(e=>{this.categoriesCache.set(e),this.updateCacheTimestamp("categories"),this.categoriesSubject.next(e)}),o(1))}getFeatures(){if(!this.isBrowser())return new i(t=>{t.complete()});if(this.isCacheValid("features")&&this.featuresCache()){let t=this.featuresCache();return this.featuresSubject.next(t),r(t)}return this._http.get(`${this.baseUrl}app-home/getFeatures`).pipe(l(t=>t.features),c(t=>{this.featuresCache.set(t),this.updateCacheTimestamp("features"),this.featuresSubject.next(t)}),o(1))}getPartners(){if(!this.isBrowser())return new i(e=>{e.complete()});if(this.isCacheValid("partners")&&this.partnersCache()){let e=this.partnersCache(),t=this.filterPartners(e);return this.partnersSubject.next(t),r(t)}return this._http.get(`${this.baseUrl}app-home/getHomeData`).pipe(l(e=>e.partners),c(e=>{this.partnersCache.set(e),this.updateCacheTimestamp("partners");let t=this.filterPartners(e);this.partnersSubject.next(t)}),l(e=>this.filterPartners(e)),o(1))}filterPartners(e){if(!this.policyType)return e;let a={medical:1,motor:2,property:3}[this.policyType];return e.filter(h=>h.category_id===a)}invalidateCache(e){switch(e){case"homeData":this.homeDataCache.set(null),this.homeDataSubject.next(null);break;case"aboutData":this.aboutDataCache.set(null),this.aboutDataSubject.next(null);break;case"contactData":this.contactDataCache.set(null),this.contactDataSubject.next(null);break;case"claimInfo":this.claimInfoCache.set(null),this.claimInfoSubject.next(null);break;case"aboutDownload":this.aboutDownloadCache.set(null),this.aboutDownloadSubject.next(null);break;case"sliders":this.slidersCache.set(null),this.slidersSubject.next(null);break;case"testimonials":this.testimonialsCache.set(null),this.testimonialsSubject.next(null);break;case"categories":this.categoriesCache.set(null),this.categoriesSubject.next(null);break;case"features":this.featuresCache.set(null),this.featuresSubject.next(null);break;case"partners":this.partnersCache.set(null),this.partnersSubject.next(null);break}this.updateCacheTimestamp(e,0)}setCacheExpiration(e,t){let h=Date.now()+t;this.updateCacheTimestamp(e,h)}clearAllData(){this.homeDataCache.set(null),this.aboutDataCache.set(null),this.contactDataCache.set(null),this.claimInfoCache.set(null),this.aboutDownloadCache.set(null),this.slidersCache.set(null),this.testimonialsCache.set(null),this.categoriesCache.set(null),this.featuresCache.set(null),this.partnersCache.set(null),this.homeDataSubject.next(null),this.aboutDataSubject.next(null),this.contactDataSubject.next(null),this.claimInfoSubject.next(null),this.aboutDownloadSubject.next(null),this.slidersSubject.next(null),this.testimonialsSubject.next(null),this.categoriesSubject.next(null),this.featuresSubject.next(null),this.partnersSubject.next(null),this.cacheTimestamps.set({homeData:0,aboutData:0,contactData:0,claimInfo:0,aboutDownload:0,sliders:0,testimonials:0,categories:0,features:0,partners:0})}isCacheValid(e){let t=this.cacheTimestamps()[e]||0,a=Date.now();return t===0?!1:a-t<this.CACHE_EXPIRATION}updateCacheTimestamp(e,t=Date.now()){this.cacheTimestamps.update(a=>b(g({},a),{[e]:t}))}getSingleCategory(e){let t="";switch(e){case 1:t="medical";break;case 2:t="motor";break;case 3:t="building";break;case 5:t="jop"}let a={type:t};return this._http.get(`${this.baseUrl}app-category/getsingleCategory/${e}`,{params:a})}static \u0275fac=function(t){return new(t||u)};static \u0275prov=_({token:u,factory:u.\u0275fac,providedIn:"root"})};export{C as a};
