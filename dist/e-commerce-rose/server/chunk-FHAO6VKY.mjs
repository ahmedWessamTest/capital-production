import './polyfills.server.mjs';
import{a as pe}from"./chunk-QSSTDYIO.mjs";import{a as me}from"./chunk-IGQO7VH4.mjs";import{a as ce}from"./chunk-IYMTYXS2.mjs";import{c as ae,d as re,f as z,i as se,o as le}from"./chunk-VP43NVKH.mjs";import{A as T,Aa as _,Ab as C,Da as V,F,Fa as E,Ic as Y,Jc as ee,Kc as S,M as b,Ma as c,Oc as te,Ra as G,Rc as ie,Sa as I,Sc as ne,U as L,Ua as Z,V as M,Va as A,W as $,Wa as R,X as j,Xa as a,Xc as oe,Ya as r,Za as g,ab as q,ad as ge,bb as k,cb as f,cc as Q,ea as D,ia as U,kb as u,lb as h,m as P,oc as W,pa as N,qa as v,qc as X,ra as O,tb as J,ub as K,va as s,vb as H,za as d,zb as x}from"./chunk-UQC3G75Y.mjs";import"./chunk-X2SEQXRR.mjs";var w=class n{sanitizer=b(S);isBrowser=X(b(U));allowedTags=["p","div","span","h1","h2","h3","h4","h5","h6","ul","ol","li","a","img","table","tr","td","th","br"];tagsToReplace=["div","section","article","header","footer"];tagsToRemove=["script","style","iframe","object","embed"];tagsToUnwrap=["strong","b","em","i","u","strike","code","pre"];allowedAttributes=["src","alt","width","height","href","title","target"];transform(e){if(!e)return this.sanitizer.bypassSecurityTrustHtml("");let i=this.cleanHtml(e);return this.sanitizer.bypassSecurityTrustHtml(i)}cleanHtml(e){e=e.replace(/<!--[\s\S]*?-->/g,"");for(let o of this.tagsToRemove){let l=new RegExp(`<${o}[^>]*>([\\s\\S]*?)<\\/${o}>`,"gi");e=e.replace(l,"")}for(let o of this.tagsToReplace){let l=new RegExp(`<${o}[^>]*>`,"gi"),m=new RegExp(`<\\/${o}>`,"gi");e=e.replace(l,"<p>"),e=e.replace(m,"</p>")}for(let o of this.tagsToUnwrap){let l=new RegExp(`<${o}[^>]*>`,"gi"),m=new RegExp(`<\\/${o}>`,"gi");e=e.replace(l,""),e=e.replace(m,"")}let i=this.allowedTags.join("|"),t=new RegExp(`<(?!\\/?(${i})\\b)[^>]+>`,"gi");return e=e.replace(t,""),e=this.processAttributes(e),e=this.ensureClosedTags(e),e=`<div class="safe-html-wrapper">${e}</div>`,e}processAttributes(e){let i=/<[^>]+>/g;return e.replace(i,t=>{if(t.match(/^<\//))return t;for(let o of this.allowedAttributes){let l=new RegExp(`\\s${o}=["'][^"']*["']`,"gi");t=t.replace(l,m=>m.toLowerCase())}return t.replace(/\s\w+=(["'])[^"']*\1/g,"")})}ensureClosedTags(e){let i=e,t=(i.match(/<p[^>]*>/gi)||[]).length,o=(i.match(/<\/p>/gi)||[]).length;for(;t>o;)i+="</p>",o++;return i}static \u0275fac=function(i){return new(i||n)};static \u0275pipe=V({name:"filterHtml",type:n,pure:!0})};var B=class n{set content(e){this._content=e,this.trusted?this.htmlContent=e:this.htmlContent=this.sanitizer.sanitize(N.HTML,e)||""}trusted=!0;get content(){return this._content}_content="";htmlContent="";sanitizer=b(S);static \u0275fac=function(i){return new(i||n)};static \u0275cmp=_({type:n,selectors:[["app-safe-html"]],hostAttrs:["ngSkipHydration","true"],inputs:{content:"content",trusted:"trusted"},decls:2,vars:3,consts:[[1,"safe-html-content","prose","max-w-none",3,"innerHTML"]],template:function(i,t){i&1&&(g(0,"div",0),x(1,"filterHtml")),i&2&&c("innerHTML",C(1,1,t.htmlContent),v)},dependencies:[w],styles:["[_nghost-%COMP%]{display:contents}.safe-html-content[_ngcontent-%COMP%]{display:contents}"]})};var ve=()=>[1,2,3],he=(n,e)=>[n,e],_e=n=>({"opacity-0":n});function xe(n,e){n&1&&(a(0,"div",19),g(1,"div",20),a(2,"div",21),g(3,"div",22)(4,"div",23),r()())}function Ce(n,e){n&1&&(a(0,"div",5)(1,"div",6)(2,"div",7),g(3,"img",8),r(),a(4,"div",9),g(5,"div",10)(6,"div",11),a(7,"div",12),g(8,"div",13)(9,"div",13)(10,"div",14),r()()()(),a(11,"div",15)(12,"div",16)(13,"h2",17),u(14,"Latest Blogs"),r(),a(15,"div",18),A(16,xe,5,0,"div",19,Z),r()()()),n&2&&(c("@skeletonAnimation",void 0),s(11),c("@skeletonAnimation",void 0),s(5),R(J(2,ve)))}function Se(n,e){n&1&&g(0,"div",39)}function we(n,e){if(n&1){let i=q();a(0,"div",36),k("click",function(){let o=L(i).$implicit,l=f(2);return M(l.onPostClick(o))}),a(1,"div",37)(2,"img",38),k("load",function(){let o=L(i).$implicit,l=f(2);return M(l.onImageLoad(o.id))}),r(),E(3,Se,1,0,"div",39),r(),a(4,"div",21)(5,"p",40),u(6),r(),a(7,"p",41),u(8),r()()()}if(n&2){let i=e.$implicit,t=f(2);c("routerLink",H(7,he,"/"+t.languageService.getCurrentLanguage()+"/blog",i.slug)),s(2),c("src",t.getOptimizedImageUrl(i.image),O)("alt",i.title+" thumbnail")("ngClass",K(10,_e,!t.isImageLoaded(i.id))),s(),I(t.isImageLoaded(i.id)?-1:3),s(3),h(i.title),s(2),h(i.date)}}function Be(n,e){if(n&1&&(a(0,"div",24)(1,"div",6)(2,"div",25),g(3,"img",26),a(4,"a",27),$(),a(5,"svg",28),g(6,"path",29),r()()(),j(),a(7,"div")(8,"h1",30),u(9),r(),a(10,"p",31),u(11),r(),a(12,"div",32),g(13,"div",33),x(14,"safeHtml"),r()()()(),a(15,"div",34)(16,"div",16)(17,"h2",17),u(18),r(),a(19,"div",18),A(20,we,9,12,"div",35,G().trackByPostId,!0),r()()()),n&2){let i,t=f();s(3),c("src",t.blog.main_image?t.getOptimizedImageUrl(t.blog.main_image):"assets/images/placeholder.jpg",O)("alt",t.getBlogTitle()+" featured image"),s(),c("routerLink",H(9,he,"/"+t.languageService.getCurrentLanguage().toLowerCase(),t.languageService.getCurrentLanguage().toLowerCase()==="en"?"english-blogs":"arabic-blogs")),s(5),h(t.getBlogTitle()),s(2),h((i=t.blog.blog_date)!==null&&i!==void 0?i:"No date available"),s(2),c("innerHTML",C(14,7,t.getBlogText()),v),s(5),h(t.languageService.getCurrentLanguage()==="en"?"Latest Blogs":"\u0623\u062D\u062F\u062B \u0627\u0644\u0645\u0642\u0627\u0644\u0627\u062A"),s(2),R(t.sidebarPosts)}}var ue=class n{constructor(e,i,t,o,l,m,y){this.blogsService=e;this.arabicBlogsService=i;this.route=t;this.router=o;this.languageService=l;this.meta=m;this.title=y}blog=null;sidebarPosts=[];isLoading=D(!0);API_CONFIG=ge.BASE_URL_IMAGE;loadedImages=new Set;ngOnInit(){this.route.paramMap.pipe(F(e=>{let i=e.get("slug"),t=e.get("lang");if(!i||!t||t!==this.languageService.getCurrentLanguage()){this.redirectToBlogList();return}this.loadBlog(i)})).subscribe()}loadBlog(e){this.isLoading.set(!0),(this.languageService.getCurrentLanguage()==="ar"?this.arabicBlogsService.getSingleArabicBlog(e).pipe(P(t=>({blog:t.blog,blogs:t.blogs})),T(1)):this.blogsService.getSingleEnglishBlog(e).pipe(P(t=>({blog:t.blog,blogs:t.blogs})),T(1))).subscribe({next:t=>{if(!t.blog){this.redirectToBlogList();return}this.blog=t.blog;let o=this.languageService.getCurrentLanguage()==="ar"?this.blog.ar_meta_title||this.blog.ar_blog_title:this.blog.en_meta_title||this.blog.en_blog_title,l=this.languageService.getCurrentLanguage()==="ar"?this.blog.ar_meta_text||"":this.blog.en_meta_text||"",m=window.location.href,y=this.getOptimizedImageUrl(t.blog.main_image);this.title.setTitle(o),this.meta.updateTag({name:"description",content:l}),this.meta.updateTag({name:"og:title",content:o}),this.meta.updateTag({name:"og:description",content:l}),this.meta.updateTag({name:"og:image",content:y}),this.meta.updateTag({name:"og:url",content:m}),this.meta.updateTag({name:"og:type",content:"article"}),this.meta.updateTag({name:"twitter:card",content:"summary_large_image"}),this.meta.updateTag({name:"twitter:title",content:o}),this.meta.updateTag({name:"twitter:description",content:l}),this.meta.updateTag({name:"twitter:image",content:y}),this.meta.updateTag({rel:"canonical",href:m}),this.sidebarPosts=t.blogs.sort((p,be)=>new Date(be.created_at).getTime()-new Date(p.created_at).getTime()).slice(0,5).map(p=>({id:p.id,title:this.languageService.getCurrentLanguage()==="ar"?p.ar_blog_title:p.en_blog_title,date:p.blog_date??new Date().toISOString().split("T")[0],image:p.main_image,slug:this.languageService.getCurrentLanguage()==="ar"?p.ar_slug:p.en_slug})),this.isLoading.set(!1)},error:()=>this.redirectToBlogList()})}getOptimizedImageUrl(e){return`${this.API_CONFIG}${e}?w=1200&h=300&fit=crop&q=80`}getBlogTitle(){return this.blog?this.languageService.getCurrentLanguage()==="en"?this.blog.en_blog_title:this.blog.ar_blog_title:""}getBlogText(){return this.blog?this.languageService.getCurrentLanguage()==="en"?this.blog.en_blog_text:this.blog.ar_blog_text:""}getFirstScriptText(){return this.blog?this.languageService.getCurrentLanguage()==="en"?this.blog.en_first_script_text:this.blog.ar_first_script_text:""}getSecondScriptText(){return this.blog?this.languageService.getCurrentLanguage()==="en"?this.blog.en_second_script_text:this.blog.ar_second_script_text:""}redirectToBlogList(){let e=this.languageService.getCurrentLanguage();this.router.navigate([`${e}/${e==="en"?"english-blogs":"arabic-blogs"}`])}trackByPostId(e,i){return i.id}onPostClick(e){this.router.navigate([`/${this.languageService.getCurrentLanguage()}/blog`,e.slug])}onImageLoad(e){this.loadedImages.add(e)}isImageLoaded(e){return this.loadedImages.has(e)}static \u0275fac=function(i){return new(i||n)(d(me),d(ce),d(te),d(ie),d(le),d(Y),d(ee))};static \u0275cmp=_({type:n,selectors:[["app-blog-post"]],decls:8,vars:3,consts:[[1,"container","relative","mx-auto"],[1,"content-wrapper"],[1,"flex-container"],[1,"hidden"],[3,"content"],[1,"main-content"],[1,"card"],[1,"hero-image-container"],["src","assets/blogs/blog-place.jpg","alt","Loading blog featured image","loading","eager","fetchpriority","high","width","1200","height","300","decoding","async",1,"hero-image"],[1,"card-content","p-6"],[1,"h-8","w-3/4","bg-gray-200","rounded","mb-4"],[1,"h-4","w-1/4","bg-gray-200","rounded","mb-4"],[1,"space-y-2"],[1,"h-4","bg-gray-200","rounded"],[1,"h-4","bg-gray-200","rounded","w-5/6"],[1,"sidebar","!sticky","!top-0"],[1,"sidebar-content"],[1,"sidebar-title"],[1,"posts-container"],[1,"post-item","flex","gap-4"],[1,"post-thumbnail","bg-gray-200","animate-pulse","h-16","w-16","rounded"],[1,"post-content","flex-1"],[1,"h-4","w-3/4","bg-gray-200","rounded","mb-2"],[1,"h-3","w-1/4","bg-gray-200","rounded"],[1,"main-content","mx-auto"],[1,"relative","hero-image-container"],["loading","eager","fetchpriority","high","width","1200","height","300","decoding","async",1,"hero-image",3,"src","alt"],[1,"",3,"routerLink"],["width","35","height","35","viewBox","0 0 35 35","fill","none","xmlns","http://www.w3.org/2000/svg",1,"z-10","absolute","top-10","start-10","cursor-pointer"],["d","M17.5 2.97266C9.47734 2.97266 2.97363 9.47637 2.97363 17.499C2.97363 25.5217 9.47734 32.0254 17.5 32.0254C25.5227 32.0254 32.0264 25.5217 32.0264 17.499C32.0264 9.47637 25.5227 2.97266 17.5 2.97266ZM22.158 24.4854C22.5859 24.9119 22.5866 25.6044 22.1601 26.0323C21.9461 26.2463 21.6658 26.3536 21.3855 26.3536C21.106 26.3536 20.8271 26.247 20.6131 26.0344L12.842 18.2852C12.6362 18.0801 12.5207 17.8019 12.5207 17.5113C12.5207 17.2208 12.6355 16.9426 12.8413 16.7368L20.6131 8.96504C21.0403 8.53779 21.7328 8.53779 22.1601 8.96504C22.5873 9.39229 22.5873 10.0848 22.1601 10.512L15.1621 17.5093L22.158 24.4854Z","fill","#555"],[1,"main-title","my-4"],[1,"date","my-2"],[1,"whitespace-normal","leading-relaxed","tracking-normal","font-normal","mb-[10px]"],[1,"prose",3,"innerHTML"],[1,"sidebar","!sticky","!top-40"],[1,"post-item","flex","gap-4",3,"routerLink"],[1,"post-item","flex","gap-4",3,"click","routerLink"],[1,"post-thumbnail-container","relative","h-[92px]","w-[140px]"],["loading","lazy","width","64","height","64","decoding","async",1,"post-thumbnail","absolute","inset-0","w-full","h-full","object-cover","rounded",3,"load","src","alt","ngClass"],[1,"post-thumbnail","bg-gray-200","animate-pulse","h-[92px]","w-[140px]","rounded","absolute","inset-0"],[1,"post-title"],[1,"post-date"]],template:function(i,t){i&1&&(a(0,"div",0)(1,"div",1)(2,"div",2),E(3,Ce,18,3)(4,Be,22,12),r()()(),a(5,"div",3),g(6,"app-safe-html",4)(7,"app-safe-html",4),r()),i&2&&(s(3),I(t.isLoading()?3:t.blog?4:-1),s(3),c("content",t.getFirstScriptText()),s(),c("content",t.getSecondScriptText()))},dependencies:[W,Q,oe,ne,B,pe],styles:[".container[_ngcontent-%COMP%]{min-height:100vh}.content-wrapper[_ngcontent-%COMP%]{max-width:80rem;margin:0 auto;padding:2rem 1rem}.flex-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2rem}@media (min-width: 1024px){.flex-container[_ngcontent-%COMP%]{flex-direction:row;align-items:flex-start}}.main-content[_ngcontent-%COMP%]{flex:1;width:100%}@media (min-width: 1024px){.main-content[_ngcontent-%COMP%]{flex:2;margin-right:2rem}}.card[_ngcontent-%COMP%]{background:#fff;border-radius:.5rem;overflow:hidden}.hero-image-container[_ngcontent-%COMP%]{position:relative;border-radius:80px}.hero-image[_ngcontent-%COMP%]{width:890px;height:456px;object-fit:cover;border-radius:80px}.card-content[_ngcontent-%COMP%]{padding:2rem}.main-title[_ngcontent-%COMP%]{color:#000;font-family:Alexandria;font-size:23px;font-style:normal;font-weight:600;line-height:30px;text-transform:capitalize}.date[_ngcontent-%COMP%]{color:#37a6de;font-family:Alexandria;font-size:18px;font-style:normal;font-weight:500;line-height:20px;text-transform:capitalize}.content-text[_ngcontent-%COMP%]{color:#374151;line-height:1.625}.content-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:1.5rem}.content-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:last-child{margin-bottom:0}.sidebar[_ngcontent-%COMP%]{width:100%}@media (min-width: 1024px){.sidebar[_ngcontent-%COMP%]{flex:1;width:auto;min-width:300px}}@media (max-width: 567px){.sidebar-content[_ngcontent-%COMP%]{padding:1.5rem}}.sidebar-content[_ngcontent-%COMP%]{border-radius:.5rem;padding:1.5rem;position:sticky;top:2rem}.sidebar-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:700;color:#111827;margin-bottom:1.5rem}.posts-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.post-item[_ngcontent-%COMP%]{display:flex;gap:1rem;padding:.75rem;border-radius:.5rem;transition:background-color .2s ease;cursor:pointer}.post-item[_ngcontent-%COMP%]:hover{background-color:#f9fafb}.post-thumbnail[_ngcontent-%COMP%]{object-fit:cover;width:140px;height:92px;flex-shrink:0;border-radius:23px}.post-content[_ngcontent-%COMP%]{flex:1;min-width:0}.post-title[_ngcontent-%COMP%]{font-weight:600;color:#111827;font-size:.875rem;line-height:1.25;margin-bottom:.5rem}.post-date[_ngcontent-%COMP%]{color:#6b7280;font-size:.75rem;margin:0}"],data:{animation:[ae("skeletonAnimation",[se(":enter",[z({opacity:.7}),re("300ms ease-in",z({opacity:1}))])])]},changeDetection:0})};export{ue as BlogPostComponent};
