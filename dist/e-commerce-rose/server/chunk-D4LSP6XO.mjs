import './polyfills.server.mjs';
import{b as bn}from"./chunk-7XZGEYGO.mjs";import{a as Tn}from"./chunk-666L3XN7.mjs";import{o as An}from"./chunk-VP43NVKH.mjs";import{$ as pn,D as hn,Dc as En,F as J,Fb as gn,Gb as _n,I as Ee,K as ve,M as I,Mb as nt,N as x,O as Te,Q as fn,R as Ae,Rc as vn,Z as be,ad as v,b as Ze,ba as P,e as cn,ea as mn,f as un,g as dn,h as Ie,i as Qe,ia as ye,j as et,k as tt,l as ne,qc as In,u as ln}from"./chunk-UQC3G75Y.mjs";import{a as on,b as an,g as d}from"./chunk-X2SEQXRR.mjs";var yn=()=>{};var Mr={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};var kn=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},Ur=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],o=n[t++],u=n[t++],a=((i&7)<<18|(s&63)<<12|(o&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(a&1023))}else{let s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},we={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],o=i+1<n.length,u=o?n[i+1]:0,a=i+2<n.length,c=a?n[i+2]:0,h=s>>2,g=(s&3)<<4|u>>4,l=(u&15)<<2|c>>6,p=c&63;a||(p=64,o||(l=64)),r.push(t[h],t[g],t[l],t[p])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(kn(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Ur(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],u=i<n.length?t[n.charAt(i)]:0;++i;let c=i<n.length?t[n.charAt(i)]:64;++i;let g=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||u==null||c==null||g==null)throw new it;let l=s<<2|u>>4;if(r.push(l),c!==64){let p=u<<4&240|c>>2;if(r.push(p),g!==64){let S=c<<6&192|g;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},it=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},Fr=function(n){let e=kn(n);return we.encodeByteArray(e,!0)},ot=function(n){return Fr(n).replace(/\./g,"")},Se=function(n){try{return we.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Rn(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var xr=()=>Rn().__FIREBASE_DEFAULTS__,Vr=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},$r=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Se(n[1]);return e&&JSON.parse(e)},Cn=()=>{try{return yn()||xr()||Vr()||$r()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Pn=n=>{var e,t;return(t=(e=Cn())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]};var at=()=>{var n;return(n=Cn())===null||n===void 0?void 0:n.config};var V=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function ie(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}function On(n){return d(this,null,function*(){return(yield fetch(n,{credentials:"include"})).ok})}var re={};function Wr(){let n={prod:[],emulator:[]};for(let e of Object.keys(re))re[e]?n.emulator.push(e):n.prod.push(e);return n}function Hr(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var wn=!1;function Dn(n,e){if(typeof window>"u"||typeof document>"u"||!ie(window.location.host)||re[n]===e||re[n]||wn)return;re[n]=e;function t(l){return`__firebase__banner__${l}`}let r="__firebase__banner",s=Wr().prod.length>0;function o(){let l=document.getElementById(r);l&&l.remove()}function u(l){l.style.display="flex",l.style.background="#7faaf0",l.style.position="fixed",l.style.bottom="5px",l.style.left="5px",l.style.padding=".5em",l.style.borderRadius="5px",l.style.alignItems="center"}function a(l,p){l.setAttribute("width","24"),l.setAttribute("id",p),l.setAttribute("height","24"),l.setAttribute("viewBox","0 0 24 24"),l.setAttribute("fill","none"),l.style.marginLeft="-6px"}function c(){let l=document.createElement("span");return l.style.cursor="pointer",l.style.marginLeft="16px",l.style.fontSize="24px",l.innerHTML=" &times;",l.onclick=()=>{wn=!0,o()},l}function h(l,p){l.setAttribute("id",p),l.innerText="Learn more",l.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",l.setAttribute("target","__blank"),l.style.paddingLeft="5px",l.style.textDecoration="underline"}function g(){let l=Hr(r),p=t("text"),S=document.getElementById(p)||document.createElement("span"),ee=t("learnmore"),Y=document.getElementById(ee)||document.createElement("a"),te=t("preprendIcon"),U=document.getElementById(te)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(l.created){let F=l.element;u(F),h(Y,ee);let _e=c();a(U,te),F.append(U,S,Y,_e),document.body.appendChild(F)}s?(S.innerText="Preview backend disconnected.",U.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(U.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,S.innerText="Preview backend running in this workspace."),S.setAttribute("id",p)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}function A(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Nn(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(A())}function Ln(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Mn(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Un(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ke(){try{return typeof indexedDB=="object"}catch{return!1}}function Fn(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}var Br="FirebaseError",y=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=Br,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,T.prototype.create)}},T=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?zr(s,r):"Error",u=`${this.serviceName}: ${o} (${i}).`;return new y(i,u,r)}};function zr(n,e){return n.replace(jr,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var jr=/\{\$([^}]+)}/g;function O(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let s=n[i],o=e[i];if(Sn(s)&&Sn(o)){if(!O(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function Sn(n){return n!==null&&typeof n=="object"}function Re(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function xn(n,e){let t=new st(n,e);return t.subscribe.bind(t)}var st=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");Gr(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=rt),i.error===void 0&&(i.error=rt),i.complete===void 0&&(i.complete=rt);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function Gr(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function rt(){}var ca=4*60*60*1e3;function $(n){return n&&n._delegate?n._delegate:n}Mr.NODE_CLIENT=!0;var E=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var W="[DEFAULT]";var ct=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new V;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Kr(e))try{this.getOrInitializeService({instanceIdentifier:W})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=W){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return d(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=W){return this.instances.has(e)}getOptions(e=W){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[s,o]of this.instancesDeferred.entries()){let u=this.normalizeInstanceIdentifier(s);r===u&&o.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:qr(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=W){return this.component?this.component.multipleInstances?e:W:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function qr(n){return n===W?void 0:n}function Kr(n){return n.instantiationMode==="EAGER"}var Ce=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new ct(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var Yr=[],m=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(m||{}),Jr={debug:m.DEBUG,verbose:m.VERBOSE,info:m.INFO,warn:m.WARN,error:m.ERROR,silent:m.SILENT},Xr=m.INFO,Zr={[m.DEBUG]:"log",[m.VERBOSE]:"log",[m.INFO]:"info",[m.WARN]:"warn",[m.ERROR]:"error"},Qr=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=Zr[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},D=class{constructor(e){this.name=e,this._logLevel=Xr,this._logHandler=Qr,this._userLogHandler=null,Yr.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in m))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Jr[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,m.DEBUG,...e),this._logHandler(this,m.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,m.VERBOSE,...e),this._logHandler(this,m.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,m.INFO,...e),this._logHandler(this,m.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,m.WARN,...e),this._logHandler(this,m.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,m.ERROR,...e),this._logHandler(this,m.ERROR,...e)}};var ei=(n,e)=>e.some(t=>n instanceof t),Vn,$n;function ti(){return Vn||(Vn=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ni(){return $n||($n=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var Wn=new WeakMap,dt=new WeakMap,Hn=new WeakMap,ut=new WeakMap,ht=new WeakMap;function ri(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(w(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&Wn.set(t,n)}).catch(()=>{}),ht.set(e,n),e}function ii(n){if(dt.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});dt.set(n,e)}var lt={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return dt.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Hn.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return w(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Bn(n){lt=n(lt)}function si(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(Pe(this),e,...t);return Hn.set(r,e.sort?e.sort():[e]),w(r)}:ni().includes(n)?function(...e){return n.apply(Pe(this),e),w(Wn.get(this))}:function(...e){return w(n.apply(Pe(this),e))}}function oi(n){return typeof n=="function"?si(n):(n instanceof IDBTransaction&&ii(n),ei(n,ti())?new Proxy(n,lt):n)}function w(n){if(n instanceof IDBRequest)return ri(n);if(ut.has(n))return ut.get(n);let e=oi(n);return e!==n&&(ut.set(n,e),ht.set(e,n)),e}var Pe=n=>ht.get(n);function jn(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(n,e),u=w(o);return r&&o.addEventListener("upgradeneeded",a=>{r(w(o.result),a.oldVersion,a.newVersion,w(o.transaction),a)}),t&&o.addEventListener("blocked",a=>t(a.oldVersion,a.newVersion,a)),u.then(a=>{s&&a.addEventListener("close",()=>s()),i&&a.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),u}var ai=["get","getKey","getAll","getAllKeys","count"],ci=["put","add","delete","clear"],ft=new Map;function zn(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(ft.get(e))return ft.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=ci.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||ai.includes(t)))return;let s=function(o,...u){return d(this,null,function*(){let a=this.transaction(o,i?"readwrite":"readonly"),c=a.store;return r&&(c=c.index(u.shift())),(yield Promise.all([c[t](...u),i&&a.done]))[0]})};return ft.set(e,s),s}Bn(n=>an(on({},n),{get:(e,t,r)=>zn(e,t)||n.get(e,t,r),has:(e,t)=>!!zn(e,t)||n.has(e,t)}));var mt=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(ui(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function ui(n){let e=n.getComponent();return e?.type==="VERSION"}var gt="@firebase/app",Gn="0.13.2";var k=new D("@firebase/app"),di="@firebase/app-compat",li="@firebase/analytics-compat",hi="@firebase/analytics",fi="@firebase/app-check-compat",pi="@firebase/app-check",mi="@firebase/auth",gi="@firebase/auth-compat",_i="@firebase/database",Ii="@firebase/data-connect",Ei="@firebase/database-compat",vi="@firebase/functions",Ti="@firebase/functions-compat",Ai="@firebase/installations",bi="@firebase/installations-compat",yi="@firebase/messaging",wi="@firebase/messaging-compat",Si="@firebase/performance",ki="@firebase/performance-compat",Ri="@firebase/remote-config",Ci="@firebase/remote-config-compat",Pi="@firebase/storage",Oi="@firebase/storage-compat",Di="@firebase/firestore",Ni="@firebase/ai",Li="@firebase/firestore-compat",Mi="firebase",Ui="11.10.0";var _t="[DEFAULT]",Fi={[gt]:"fire-core",[di]:"fire-core-compat",[hi]:"fire-analytics",[li]:"fire-analytics-compat",[pi]:"fire-app-check",[fi]:"fire-app-check-compat",[mi]:"fire-auth",[gi]:"fire-auth-compat",[_i]:"fire-rtdb",[Ii]:"fire-data-connect",[Ei]:"fire-rtdb-compat",[vi]:"fire-fn",[Ti]:"fire-fn-compat",[Ai]:"fire-iid",[bi]:"fire-iid-compat",[yi]:"fire-fcm",[wi]:"fire-fcm-compat",[Si]:"fire-perf",[ki]:"fire-perf-compat",[Ri]:"fire-rc",[Ci]:"fire-rc-compat",[Pi]:"fire-gcs",[Oi]:"fire-gcs-compat",[Di]:"fire-fst",[Li]:"fire-fst-compat",[Ni]:"fire-vertex","fire-js":"fire-js",[Mi]:"fire-js-all"};var se=new Map,xi=new Map,It=new Map;function qn(n,e){try{n.container.addComponent(e)}catch(t){k.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function R(n){let e=n.name;if(It.has(e))return k.debug(`There were multiple attempts to register component ${e}.`),!1;It.set(e,n);for(let t of se.values())qn(t,n);for(let t of xi.values())qn(t,n);return!0}function Oe(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function H(n){return n==null?!1:n.settings!==void 0}var Vi={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},N=new T("app","Firebase",Vi);var Et=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new E("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw N.create("app-deleted",{appName:this._name})}};var De=Ui;function At(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:_t,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw N.create("bad-app-name",{appName:String(i)});if(t||(t=at()),!t)throw N.create("no-options");let s=se.get(i);if(s){if(O(t,s.options)&&O(r,s.config))return s;throw N.create("duplicate-app",{appName:i})}let o=new Ce(i);for(let a of It.values())o.addComponent(a);let u=new Et(t,r,o);return se.set(i,u),u}function ae(n=_t){let e=se.get(n);if(!e&&n===_t&&at())return At();if(!e)throw N.create("no-app",{appName:n});return e}function Ne(){return Array.from(se.values())}function _(n,e,t){var r;let i=(r=Fi[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let u=[`Unable to register library "${i}" with version "${e}":`];s&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&u.push("and"),o&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),k.warn(u.join(" "));return}R(new E(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var $i="firebase-heartbeat-database",Wi=1,oe="firebase-heartbeat-store",pt=null;function Xn(){return pt||(pt=jn($i,Wi,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(oe)}catch(t){console.warn(t)}}}}).catch(n=>{throw N.create("idb-open",{originalErrorMessage:n.message})})),pt}function Hi(n){return d(this,null,function*(){try{let t=(yield Xn()).transaction(oe),r=yield t.objectStore(oe).get(Zn(n));return yield t.done,r}catch(e){if(e instanceof y)k.warn(e.message);else{let t=N.create("idb-get",{originalErrorMessage:e?.message});k.warn(t.message)}}})}function Kn(n,e){return d(this,null,function*(){try{let r=(yield Xn()).transaction(oe,"readwrite");yield r.objectStore(oe).put(e,Zn(n)),yield r.done}catch(t){if(t instanceof y)k.warn(t.message);else{let r=N.create("idb-set",{originalErrorMessage:t?.message});k.warn(r.message)}}})}function Zn(n){return`${n.name}!${n.options.appId}`}var Bi=1024,zi=30,vt=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new Tt(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return d(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Yn();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>zi){let o=Gi(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){k.warn(r)}})}getHeartbeatsHeader(){return d(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=Yn(),{heartbeatsToSend:r,unsentEntries:i}=ji(this._heartbeatsCache.heartbeats),s=ot(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return k.warn(t),""}})}};function Yn(){return new Date().toISOString().substring(0,10)}function ji(n,e=Bi){let t=[],r=n.slice();for(let i of n){let s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Jn(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),Jn(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var Tt=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return d(this,null,function*(){return ke()?Fn().then(()=>!0).catch(()=>!1):!1})}read(){return d(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield Hi(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return d(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return Kn(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return d(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return Kn(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function Jn(n){return ot(JSON.stringify({version:2,heartbeats:n})).length}function Gi(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function qi(n){R(new E("platform-logger",e=>new mt(e),"PRIVATE")),R(new E("heartbeat",e=>new vt(e),"PRIVATE")),_(gt,Gn,n),_(gt,Gn,"esm2017"),_("fire-js","")}qi("");var Ki="firebase",Yi="11.10.0";_(Ki,Yi,"app");var Z=new gn("ANGULARFIRE2_VERSION");function bt(n,e,t){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===t);if(s.length===1)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var Me=(n,e)=>{let t=e?[e]:Ne(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},X=function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n}(X||{}),Qn=nt()&&typeof Zone<"u"?X.WARN:X.SILENT;var Le=class{zone;delegate;constructor(e,t=un){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,s=function(o){i?i.runGuarded(()=>{e.apply(this,[o])}):e.apply(this,[o])};return this.delegate.schedule(s,t,r)}},Q=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=I(P);this.outsideAngular=t.runOutsideAngular(()=>new Le(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new Le(typeof Zone>"u"?void 0:Zone.current,cn))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),er=!1;function Xi(n,e){!er&&(Qn>X.SILENT||nt())&&(er=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),Qn>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function Zi(n){let e=I(P,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function B(n){let e=I(P,{optional:!0});return e?e.run(()=>n()):n()}var Qi=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),Ae(t,()=>B(()=>n.apply(void 0,r)))),z=(n,e,t)=>(t||=e?X.WARN:X.VERBOSE,function(){let r,i=arguments,s,o,u;try{s=I(Q),o=I(pn),u=I(fn)}catch{return Xi(n,t),n.apply(this,i)}for(let c=0;c<arguments.length;c++)typeof i[c]=="function"&&(e&&(r||=B(()=>o.add())),i[c]=Qi(i[c],r,u));let a=Zi(()=>n.apply(this,i));return e?a instanceof Ze?a.pipe(et(s.outsideAngular),Qe(s.insideAngular),bn(u)):a instanceof Promise?B(()=>new Promise((c,h)=>{o.run(()=>a).then(g=>Ae(u,()=>B(()=>c(g))),g=>Ae(u,()=>B(()=>h(g))))})):typeof a=="function"&&r?function(){return setTimeout(r,0),a.apply(this,arguments)}:B(()=>a):a instanceof Ze?a.pipe(et(s.outsideAngular),Qe(s.insideAngular)):B(()=>a)});var j=class{constructor(e){return e}},ce=class{constructor(){return Ne()}};function es(n){return n&&n.length===1?n[0]:new j(ae())}var yt=new ve("angularfire2._apps"),ts={provide:j,useFactory:es,deps:[[new x,yt]]},ns={provide:ce,deps:[[new x,yt]]};function rs(n){return(e,t)=>{let r=t.get(ye);_("angularfire",Z.full,"core"),_("angularfire",Z.full,"app"),_("angular",_n.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new j(i)}}function Ja(n,...e){return Te([ts,ns,{provide:yt,useFactory:rs(n),multi:!0,deps:[P,be,Q,...e]}])}var Xa=z(At,!0);var is=new Map,ss={activated:!1,tokenObservers:[]},os={initialized:!1,enabled:!1};function b(n){return is.get(n)||Object.assign({},ss)}function ir(){return os}var as="https://content-firebaseappcheck.googleapis.com/v1";var cs="exchangeDebugToken",tr={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},oc=24*60*60*1e3;var kt=class{constructor(e,t,r,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return d(this,null,function*(){this.stop();try{this.pending=new V,this.pending.promise.catch(t=>{}),yield us(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new V,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function us(n){return new Promise(e=>{setTimeout(e,n)})}var ds={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},L=new T("appCheck","AppCheck",ds);function sr(n){if(!b(n).activated)throw L.create("use-before-activation",{appName:n.name})}function or(r,i){return d(this,arguments,function*({url:n,body:e},t){let s={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});if(o){let p=yield o.getHeartbeatsHeader();p&&(s["X-Firebase-Client"]=p)}let u={method:"POST",body:JSON.stringify(e),headers:s},a;try{a=yield fetch(n,u)}catch(p){throw L.create("fetch-network-error",{originalErrorMessage:p?.message})}if(a.status!==200)throw L.create("fetch-status-error",{httpStatus:a.status});let c;try{c=yield a.json()}catch(p){throw L.create("fetch-parse-error",{originalErrorMessage:p?.message})}let h=c.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw L.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${c.ttl}`});let g=Number(h[1])*1e3,l=Date.now();return{token:c.token,expireTimeMillis:l+g,issuedAtTimeMillis:l}})}function ar(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${as}/projects/${t}/apps/${r}:${cs}?key=${i}`,body:{debug_token:e}}}var ls="firebase-app-check-database",hs=1,Rt="firebase-app-check-store";var Ue=null;function fs(){return Ue||(Ue=new Promise((n,e)=>{try{let t=indexedDB.open(ls,hs);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(L.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Rt,{keyPath:"compositeKey"})}}}catch(t){e(L.create("storage-open",{originalErrorMessage:t?.message}))}}),Ue)}function ps(n,e){return ms(gs(n),e)}function ms(n,e){return d(this,null,function*(){let r=(yield fs()).transaction(Rt,"readwrite"),s=r.objectStore(Rt).put({compositeKey:n,value:e});return new Promise((o,u)=>{s.onsuccess=a=>{o()},r.onerror=a=>{var c;u(L.create("storage-set",{originalErrorMessage:(c=a.target.error)===null||c===void 0?void 0:c.message}))}})})}function gs(n){return`${n.options.appId}-${n.name}`}var ue=new D("@firebase/app-check");function wt(n,e){return ke()?ps(n,e).catch(t=>{ue.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function cr(){return ir().enabled}function ur(){return d(this,null,function*(){let n=ir();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var _s={error:"UNKNOWN_ERROR"};function Is(n){return we.encodeString(JSON.stringify(n),!1)}function Ct(n,e=!1,t=!1){return d(this,null,function*(){let r=n.app;sr(r);let i=b(r),s=i.token,o;if(s&&!de(s)&&(i.token=void 0,s=void 0),!s){let c=yield i.cachedTokenPromise;c&&(de(c)?s=c:yield wt(r,void 0))}if(!e&&s&&de(s))return{token:s.token};let u=!1;if(cr())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=or(ar(r,yield ur()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),u=!0);let c=yield i.exchangeTokenPromise;return yield wt(r,c),i.token=c,{token:c.token}}catch(c){return c.code==="appCheck/throttled"||c.code==="appCheck/initial-throttle"?ue.warn(c.message):t&&ue.error(c),St(c)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),u=!0),s=yield b(r).exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"||c.code==="appCheck/initial-throttle"?ue.warn(c.message):t&&ue.error(c),o=c}let a;return s?o?de(s)?a={token:s.token,internalError:o}:a=St(o):(a={token:s.token},i.token=s,yield wt(r,s)):a=St(o),u&&As(r,a),a})}function Es(n){return d(this,null,function*(){let e=n.app;sr(e);let{provider:t}=b(e);if(cr()){let r=yield ur(),{token:i}=yield or(ar(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function vs(n,e,t,r){let{app:i}=n,s=b(i),o={next:t,error:r,type:e};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&de(s.token)){let u=s.token;Promise.resolve().then(()=>{t({token:u.token}),nr(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>nr(n))}function dr(n,e){let t=b(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function nr(n){let{app:e}=n,t=b(e),r=t.tokenRefresher;r||(r=Ts(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Ts(n){let{app:e}=n;return new kt(()=>d(null,null,function*(){let t=b(e),r;if(t.token?r=yield Ct(n,!0):r=yield Ct(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=b(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},tr.RETRIAL_MIN_WAIT,tr.RETRIAL_MAX_WAIT)}function As(n,e){let t=b(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function de(n){return n.expireTimeMillis-Date.now()>0}function St(n){return{token:Is(_s),error:n}}var Pt=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=b(this.app);for(let t of e)dr(this.app,t.next);return Promise.resolve()}};function bs(n,e){return new Pt(n,e)}function ys(n){return{getToken:e=>Ct(n,e),getLimitedUseToken:()=>Es(n),addTokenListener:e=>vs(n,"INTERNAL",e),removeTokenListener:e=>dr(n.app,e)}}var ws="@firebase/app-check",Ss="0.10.1";var ks="app-check",rr="app-check-internal";function Rs(){R(new E(ks,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return bs(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(rr).initialize()})),R(new E(rr,n=>{let e=n.getProvider("app-check").getImmediate();return ys(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),_(ws,Ss)}Rs();var Cs="app-check";var Fe=class{constructor(){return Me(Cs)}};var Ps=["localhost","0.0.0.0","127.0.0.1"],Ec=typeof window<"u"&&Ps.includes(window.location.hostname);function Ir(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var Er=Ir,vr=new T("auth","Firebase",Ir());var We=new D("@firebase/auth");function Os(n,...e){We.logLevel<=m.WARN&&We.warn(`Auth (${De}): ${n}`,...e)}function Ve(n,...e){We.logLevel<=m.ERROR&&We.error(`Auth (${De}): ${n}`,...e)}function fe(n,...e){throw jt(n,...e)}function zt(n,...e){return jt(n,...e)}function Tr(n,e,t){let r=Object.assign(Object.assign({},Er()),{[e]:t});return new T("auth","Firebase",r).create(e,{appName:n.name})}function $e(n){return Tr(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function jt(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return vr.create(n,...e)}function f(n,e,...t){if(!n)throw jt(e,...t)}function C(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Ve(e),new Error(e)}function He(n,e){n||C(e)}function Ds(){return lr()==="http:"||lr()==="https:"}function lr(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function Ns(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Ds()||Mn()||"connection"in navigator)?navigator.onLine:!0}function Ls(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Lt=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,He(t>e,"Short delay should be less than long delay!"),this.isMobile=Nn()||Un()}get(){return Ns()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Ms(n,e){He(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var pe=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;C("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;C("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;C("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var Us={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var Fs=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],xs=new Lt(3e4,6e4);function Gt(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function ge(s,o,u,a){return d(this,arguments,function*(n,e,t,r,i={}){return Ar(n,i,()=>d(null,null,function*(){let c={},h={};r&&(e==="GET"?h=r:c={body:JSON.stringify(r)});let g=Re(Object.assign({key:n.config.apiKey},h)).slice(1),l=yield n._getAdditionalHeaders();l["Content-Type"]="application/json",n.languageCode&&(l["X-Firebase-Locale"]=n.languageCode);let p=Object.assign({method:e,headers:l},c);return Ln()||(p.referrerPolicy="no-referrer"),n.emulatorConfig&&ie(n.emulatorConfig.host)&&(p.credentials="include"),pe.fetch()(yield br(n,n.config.apiHost,t,g),p)}))})}function Ar(n,e,t){return d(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},Us),e);try{let i=new Mt(n),s=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw xe(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let u=s.ok?o.errorMessage:o.error.message,[a,c]=u.split(" : ");if(a==="FEDERATED_USER_ID_ALREADY_LINKED")throw xe(n,"credential-already-in-use",o);if(a==="EMAIL_EXISTS")throw xe(n,"email-already-in-use",o);if(a==="USER_DISABLED")throw xe(n,"user-disabled",o);let h=r[a]||a.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw Tr(n,h,c);fe(n,h)}}catch(i){if(i instanceof y)throw i;fe(n,"network-request-failed",{message:String(i)})}})}function Vs(s,o,u,a){return d(this,arguments,function*(n,e,t,r,i={}){let c=yield ge(n,e,t,r,i);return"mfaPendingCredential"in c&&fe(n,"multi-factor-auth-required",{_serverResponse:c}),c})}function br(n,e,t,r){return d(this,null,function*(){let i=`${e}${t}?${r}`,s=n,o=s.config.emulator?Ms(n.config,i):`${n.config.apiScheme}://${i}`;return Fs.includes(t)&&(yield s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o})}var Mt=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(zt(this.auth,"network-request-failed")),xs.get())})}};function xe(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=zt(n,e,r);return i.customData._tokenResponse=t,i}function $s(n,e){return d(this,null,function*(){return ge(n,"POST","/v1/accounts:delete",e)})}function Be(n,e){return d(this,null,function*(){return ge(n,"POST","/v1/accounts:lookup",e)})}function le(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function qt(n,e=!1){return d(this,null,function*(){let t=$(n),r=yield t.getIdToken(e),i=yr(r);f(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:le(Ot(i.auth_time)),issuedAtTime:le(Ot(i.iat)),expirationTime:le(Ot(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function Ot(n){return Number(n)*1e3}function yr(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Ve("JWT malformed, contained fewer than 3 sections"),null;try{let i=Se(t);return i?JSON.parse(i):(Ve("Failed to decode base64 JWT payload"),null)}catch(i){return Ve("Caught error parsing JWT payload as JSON",i?.toString()),null}}function hr(n){let e=yr(n);return f(e,"internal-error"),f(typeof e.exp<"u","internal-error"),f(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Ut(n,e,t=!1){return d(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof y&&Ws(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function Ws({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var Ft=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>d(this,null,function*(){yield this.iteration()}),t)}iteration(){return d(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var me=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=le(this.lastLoginAt),this.creationTime=le(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function ze(n){return d(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield Ut(n,Be(t,{idToken:r}));f(i?.users.length,t,"internal-error");let s=i.users[0];n._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?wr(s.providerUserInfo):[],u=Hs(n.providerData,o),a=n.isAnonymous,c=!(n.email&&s.passwordHash)&&!u?.length,h=a?c:!1,g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:u,metadata:new me(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(n,g)})}function Kt(n){return d(this,null,function*(){let e=$(n);yield ze(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function Hs(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function wr(n){return n.map(e=>{var{providerId:t}=e,r=Ie(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function Bs(n,e){return d(this,null,function*(){let t=yield Ar(n,{},()=>d(null,null,function*(){let r=Re({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=yield br(n,i,"/v1/token",`key=${s}`),u=yield n._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";let a={method:"POST",headers:u,body:r};return n.emulatorConfig&&ie(n.emulatorConfig.host)&&(a.credentials="include"),pe.fetch()(o,a)}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function zs(n,e){return d(this,null,function*(){return ge(n,"POST","/v2/accounts:revokeToken",Gt(n,e))})}var he=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){f(e.idToken,"internal-error"),f(typeof e.idToken<"u","internal-error"),f(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):hr(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){f(e.length!==0,"internal-error");let t=hr(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return d(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(f(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return d(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield Bs(e,t);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new n;return r&&(f(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(f(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(f(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return C("not implemented")}};function M(n,e){f(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var G=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=Ie(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ft(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new me(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return d(this,null,function*(){let t=yield Ut(this,this.stsTokenManager.getToken(this.auth,e));return f(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return qt(this,e)}reload(){return Kt(this)}_assign(e){this!==e&&(f(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){f(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return d(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield ze(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return d(this,null,function*(){if(H(this.auth.app))return Promise.reject($e(this.auth));let e=yield this.getIdToken();return yield Ut(this,$s(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,u,a,c,h;let g=(r=t.displayName)!==null&&r!==void 0?r:void 0,l=(i=t.email)!==null&&i!==void 0?i:void 0,p=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,S=(o=t.photoURL)!==null&&o!==void 0?o:void 0,ee=(u=t.tenantId)!==null&&u!==void 0?u:void 0,Y=(a=t._redirectEventId)!==null&&a!==void 0?a:void 0,te=(c=t.createdAt)!==null&&c!==void 0?c:void 0,U=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:F,emailVerified:_e,isAnonymous:rn,providerData:Je,stsTokenManager:sn}=t;f(F&&sn,e,"internal-error");let Nr=he.fromJSON(this.name,sn);f(typeof F=="string",e,"internal-error"),M(g,e.name),M(l,e.name),f(typeof _e=="boolean",e,"internal-error"),f(typeof rn=="boolean",e,"internal-error"),M(p,e.name),M(S,e.name),M(ee,e.name),M(Y,e.name),M(te,e.name),M(U,e.name);let Xe=new n({uid:F,auth:e,email:l,emailVerified:_e,displayName:g,isAnonymous:rn,photoURL:S,phoneNumber:p,tenantId:ee,stsTokenManager:Nr,createdAt:te,lastLoginAt:U});return Je&&Array.isArray(Je)&&(Xe.providerData=Je.map(Lr=>Object.assign({},Lr))),Y&&(Xe._redirectEventId=Y),Xe}static _fromIdTokenResponse(e,t,r=!1){return d(this,null,function*(){let i=new he;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield ze(s),s})}static _fromGetAccountInfoResponse(e,t,r){return d(this,null,function*(){let i=t.users[0];f(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?wr(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,u=new he;u.updateFromIdToken(r);let a=new n({uid:i.localId,auth:e,stsTokenManager:u,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new me(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(a,c),a})}};var fr=new Map;function q(n){He(n instanceof Function,"Expected a class definition");let e=fr.get(n);return e?(He(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,fr.set(n,e),e)}var js=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return d(this,null,function*(){return!0})}_set(t,r){return d(this,null,function*(){this.storage[t]=r})}_get(t){return d(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return d(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),xt=js;function Dt(n,e,t){return`firebase:${n}:${e}:${t}`}var je=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=Dt(this.userKey,i.apiKey,s),this.fullPersistenceKey=Dt("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return d(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=yield Be(this.auth,{idToken:e}).catch(()=>{});return t?G._fromGetAccountInfoResponse(this.auth,t,e):null}return G._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return d(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return d(this,null,function*(){if(!t.length)return new n(q(xt),e,r);let i=(yield Promise.all(t.map(c=>d(null,null,function*(){if(yield c._isAvailable())return c})))).filter(c=>c),s=i[0]||q(xt),o=Dt(r,e.config.apiKey,e.name),u=null;for(let c of t)try{let h=yield c._get(o);if(h){let g;if(typeof h=="string"){let l=yield Be(e,{idToken:h}).catch(()=>{});if(!l)break;g=yield G._fromGetAccountInfoResponse(e,l,h)}else g=G._fromJSON(e,h);c!==s&&(u=g),s=c;break}}catch{}let a=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!a.length?new n(s,e,r):(s=a[0],u&&(yield s._set(o,u.toJSON())),yield Promise.all(t.map(c=>d(null,null,function*(){if(c!==s)try{yield c._remove(o)}catch{}}))),new n(s,e,r))})}};function pr(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Ys(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Gs(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Xs(e))return"Blackberry";if(Zs(e))return"Webos";if(qs(e))return"Safari";if((e.includes("chrome/")||Ks(e))&&!e.includes("edge/"))return"Chrome";if(Js(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function Gs(n=A()){return/firefox\//i.test(n)}function qs(n=A()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Ks(n=A()){return/crios\//i.test(n)}function Ys(n=A()){return/iemobile/i.test(n)}function Js(n=A()){return/android/i.test(n)}function Xs(n=A()){return/blackberry/i.test(n)}function Zs(n=A()){return/webos/i.test(n)}function Sr(n,e=[]){let t;switch(n){case"Browser":t=pr(A());break;case"Worker":t=`${pr(A())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${De}/${r}`}var Vt=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((o,u)=>{try{let a=e(s);o(a)}catch(a){u(a)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return d(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function Qs(t){return d(this,arguments,function*(n,e={}){return ge(n,"GET","/v2/passwordPolicy",Gt(n,e))})}var eo=6,$t=class{constructor(e){var t,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:eo,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,u;let a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=(t=a.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),a.isValid&&(a.isValid=(r=a.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),a.isValid&&(a.isValid=(i=a.containsLowercaseLetter)!==null&&i!==void 0?i:!0),a.isValid&&(a.isValid=(s=a.containsUppercaseLetter)!==null&&s!==void 0?s:!0),a.isValid&&(a.isValid=(o=a.containsNumericCharacter)!==null&&o!==void 0?o:!0),a.isValid&&(a.isValid=(u=a.containsNonAlphanumericCharacter)!==null&&u!==void 0?u:!0),a}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var Ge=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new qe(this),this.idTokenSubscription=new qe(this),this.beforeStateQueue=new Vt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=vr,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=q(t)),this._initializationPromise=this.queue(()=>d(this,null,function*(){var r,i,s;if(!this._deleted&&(this.persistenceManager=yield je.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return d(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return d(this,null,function*(){try{let t=yield Be(this,{idToken:e}),r=yield G._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return d(this,null,function*(){var t;if(H(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(u,u))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,u=i?._redirectEventId,a=yield this.tryRedirectSignIn(e);(!o||o===u)&&a?.user&&(i=a.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return f(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return d(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return d(this,null,function*(){try{yield ze(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=Ls()}_delete(){return d(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return d(this,null,function*(){if(H(this.app))return Promise.reject($e(this));let t=e?$(e):null;return t&&f(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return d(this,null,function*(){if(!this._deleted)return e&&f(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>d(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return d(this,null,function*(){return H(this.app)?Promise.reject($e(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return H(this.app)?Promise.reject($e(this)):this.queue(()=>d(this,null,function*(){yield this.assertedPersistence.setPersistence(q(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return d(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return d(this,null,function*(){let e=yield Qs(this),t=new $t(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new T("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return d(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield zs(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return d(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return d(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&q(e)||this._popupRedirectResolver;f(t,this,"argument-error"),this.redirectPersistenceManager=yield je.create(this,[q(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return d(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>d(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return d(this,null,function*(){if(e===this.currentUser)return this.queue(()=>d(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,u=this._isInitialized?Promise.resolve():this._initializationPromise;if(f(u,this,"internal-error"),u.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let a=e.addObserver(t,r,i);return()=>{o=!0,a()}}else{let a=e.addObserver(t);return()=>{o=!0,a()}}}directlySetCurrentUser(e){return d(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return f(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Sr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return d(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return d(this,null,function*(){var e;if(H(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&Os(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function kr(n){return $(n)}var qe=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=xn(t=>this.observer=t)}get next(){return f(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};function Yt(n,e){let t=Oe(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),s=t.getOptions();if(O(s,e??{}))return i;fe(i,"already-initialized")}return t.initialize({options:e})}function to(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(q);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function Jt(n,e,t){let r=kr(n);f(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,s=Rr(e),{host:o,port:u}=no(e),a=u===null?"":`:${u}`,c={url:`${s}//${o}${a}/`},h=Object.freeze({host:o,port:u,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){f(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),f(O(c,r.config.emulator)&&O(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=c,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,ie(o)?(On(`${s}//${o}${a}`),Dn("Auth",!0)):i||ro()}function Rr(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function no(n){let e=Rr(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:mr(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:mr(o)}}}function mr(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function ro(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var Ke=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return C("not implemented")}_getIdTokenResponse(e){return C("not implemented")}_linkToIdToken(e,t){return C("not implemented")}_getReauthenticationResolver(e){return C("not implemented")}};function Nt(n,e){return d(this,null,function*(){return Vs(n,"POST","/v1/accounts:signInWithIdp",Gt(n,e))})}var io="http://localhost",Ye=class n extends Ke{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):fe("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,s=Ie(t,["providerId","signInMethod"]);if(!r||!i)return null;let o=new n(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){let t=this.buildRequest();return Nt(e,t)}_linkToIdToken(e,t){let r=this.buildRequest();return r.idToken=t,Nt(e,r)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,Nt(e,t)}buildRequest(){let e={requestUri:io,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Re(t)}return e}};var Wt=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Ht=class extends Wt{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var Xt=(()=>{class n extends Ht{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return Ye._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthIdToken:r,oauthAccessToken:i}=t;if(!r&&!i)return null;try{return n.credential(r,i)}catch{return null}}}n.GOOGLE_SIGN_IN_METHOD="google.com",n.PROVIDER_ID="google.com";return n})();function Zt(n){return $(n).signOut()}var gr="@firebase/auth",_r="1.10.8";var Bt=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return d(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){f(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function so(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function oo(n){R(new E("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:u}=r.options;f(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let a={apiKey:o,authDomain:u,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Sr(n)},c=new Ge(r,i,s,a);return to(c,t),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),R(new E("auth-internal",e=>{let t=kr(e.getProvider("auth").getImmediate());return(r=>new Bt(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),_(gr,_r,so(n)),_(gr,_r,"esm2017")}pe.initialize(fetch,Headers,Response);function Qt(n=ae()){let e=Oe(n,"auth");if(e.isInitialized())return e.getImmediate();let t=Yt(n),r=Pn("auth");return r&&Jt(t,`http://${r}`),t}oo("Node");var ao=zt("operation-not-supported-in-this-environment");function co(){return d(this,null,function*(){throw ao})}var en=co;Ge.prototype.setPersistence=()=>d(null,null,function*(){});var Cr="auth",K=class{constructor(e){return e}},tn=class{constructor(){return Me(Cr)}};var nn=new ve("angularfire2.auth-instances");function na(n,e){let t=bt(Cr,n,e);return t&&new K(t)}function ra(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new K(r)}}var ia={provide:tn,deps:[[new x,nn]]},sa={provide:K,useFactory:na,deps:[[new x,nn],j]};function vu(n,...e){return _("angularfire",Z.full,"auth"),Te([sa,ia,{provide:nn,useFactory:ra(n),multi:!0,deps:[P,be,Q,ce,[new x,Fe],...e]}])}var Tu=z(Qt,!0);var Pr=z(en,!0,2);var Or=z(Zt,!0,2);var Dr=class n{_http=I(En);auth=I(K);baseUrl=v.BASE_URL;authStorage=I(Tn);_router=I(vn);_languageService=I(An);platformId=I(ye);resetEmail="";resetOtp="";OTP_VERIFIED_TIMESTAMP_KEY="otpVerifiedTimestamp";get isBrowser(){return In(this.platformId)}isAuthenticatedValue=mn(this.checkAuthStatus());signInWithGoogle(){if(!this.isBrowser)return ne({error:"Google sign-in is only available in the browser."});let e=new Xt;return tt(Pr(this.auth,e)).pipe(hn(t=>{let r=t.user,i=r.providerData[0],s=new FormData;return s.append("google_id",r.uid||""),s.append("email",i?.email||""),this._http.post(`${v.BASE_URL}${v.AUTH.LOGIN_GOOGLE}`,s).pipe(J(o=>{if(o.access_token){let u=o.expires_in||86400;this.authStorage.saveToken(o.access_token,u),o.user&&this.authStorage.saveUserData(o.user),this.isAuthenticatedValue.set(!0)}}))}),ln(t=>(console.error("Google Sign-In error:",t),ne({error:"Failed to sign in with Google"}))))}login(e){let t=new FormData;return t.append("email",e.email),t.append("password",e.password),this._http.post(`${this.baseUrl}${v.AUTH.LOGIN}`,t).pipe(J(r=>{if(r.access_token){let i=r.expires_in||86400;this.authStorage.saveToken(r.access_token,i),r.user&&this.authStorage.saveUserData(r.user),this.isAuthenticatedValue.set(!0)}}))}setPassword(e){let t=new FormData;return t.append("user_id",this.getUserData()?.id.toString()||""),t.append("password",e.password),this._http.post(`${this.baseUrl}${v.AUTH.SET_PASS}`,t)}register(e){let t=new FormData;return t.append("name",e.name),t.append("email",e.email),t.append("phone",e.phone),t.append("password","defaultPassword123"),this._http.post(`${this.baseUrl}${v.AUTH.REGISTER}`,t).pipe(J(r=>{r&&r.user&&(this.authStorage.saveUserData(r.user),r.access_token?(this.authStorage.saveToken(r.access_token,r.expires_in||24*60*60),this.isAuthenticatedValue.set(!0)):this.isAuthenticatedValue.set(!1))}))}logout(){this.authStorage.logout(),this.isAuthenticatedValue.set(!1),this.clearResetEmail(),this.clearResetOtp(),this.clearOtpVerificationTime();let e="";return this._languageService.currentLanguage$.subscribe(t=>e=t),this._router.navigate(["/",e]),this.logoutFromGoogle(),ne({success:!0})}logoutFromGoogle(){return this.isBrowser?tt(Or(this.auth)):dn}get CurrentGoogleUser(){return this.auth.currentUser}isAuthenticated(){return this.isAuthenticatedValue()}getToken(){return this.authStorage.getToken()}authenticationState(){return this.isAuthenticatedValue.asReadonly()}checkAuthStatus(){return!!this.authStorage.getToken()}getUserData(){return this.authStorage.getUserData()}getUserId(){return this.authStorage.getUserData()?.id.toString()||""}sendOTp(e){let t=new FormData;return t.append("email",e),this._http.post(`${this.baseUrl}${v.AUTH.FORGET_PASSWORD}`,t)}verifyOtp(e){let t=new FormData;return t.append("email",e.email),t.append("reset_code",e.otp),this._http.post(`${this.baseUrl}${v.AUTH.RESET_PASSWORD}`,t).pipe(J(r=>{r.error==="Correct OTP."&&this.storeOtpVerificationTime()}))}resetPassword(e){let t=new FormData,r=this.getResetEmail();return r?(t.append("email",r),t.append("password",e.password),t.append("password_confirmation",e.password_confirmation),t.append("reset_code",e.otp||this.getResetOtp()),this._http.post(`${this.baseUrl}${v.AUTH.RESET_PASSWORD}`,t).pipe(J(()=>{this.clearResetEmail(),this.clearResetOtp(),this.clearOtpVerificationTime()}))):(console.error("Reset password email is not set in AuthService."),ne({error:"Reset email not found",message:"Please start the password reset process again."}))}storeResetEmail(e){this.resetEmail=e}getResetEmail(){return this.resetEmail}clearResetEmail(){this.resetEmail=""}storeResetOtp(e){this.resetOtp=e}getResetOtp(){return this.resetOtp}clearResetOtp(){this.resetOtp=""}storeOtpVerificationTime(){this.isBrowser&&localStorage.setItem(this.OTP_VERIFIED_TIMESTAMP_KEY,Date.now().toString())}getOtpVerifiedTime(){if(this.isBrowser){let e=localStorage.getItem(this.OTP_VERIFIED_TIMESTAMP_KEY);return e?parseInt(e,10):null}return null}clearOtpVerificationTime(){this.isBrowser&&localStorage.removeItem(this.OTP_VERIFIED_TIMESTAMP_KEY)}getCurrentLang(){return this._languageService.getCurrentLanguage()}updateUserData(e){return this._http.post(`${this.baseUrl}${v.AUTH.UPDATE_USER_DATA}`,e)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=Ee({token:n,factory:n.\u0275fac,providedIn:"root"})};export{Ja as a,Xa as b,vu as c,Tu as d,Dr as e};
