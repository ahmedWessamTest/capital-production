import './polyfills.server.mjs';
import{b as J}from"./chunk-FXIUZE2V.mjs";import{e as W}from"./chunk-D4LSP6XO.mjs";import"./chunk-7XZGEYGO.mjs";import{b as G,c as v,d as $,e as j,i as z,l as O,m as V,u as Y,w as Z}from"./chunk-YRG62QXE.mjs";import"./chunk-666L3XN7.mjs";import{c as C,d as h,f as m,g as w,i as S,j as X,k as D,o as Q}from"./chunk-VP43NVKH.mjs";import{$c as H,Aa as T,Ab as p,Fa as _,La as k,M as b,Ma as g,Oa as A,Rc as P,Sa as c,Sc as M,Xa as r,Ya as a,Za as R,Zc as K,_c as U,bb as y,cb as E,db as B,ea as F,kb as d,kc as N,lb as f,mb as L,oc as q,ub as I,va as n,zb as l}from"./chunk-UQC3G75Y.mjs";import"./chunk-X2SEQXRR.mjs";var te=e=>["/",e,"login"];function ie(e,o){e&1&&(r(0,"span",8),d(1),l(2,"translate"),a()),e&2&&(n(),f(p(2,1,"pages.auth.register.personal.errors.name-required")))}function ne(e,o){if(e&1&&_(0,ie,3,3,"span",8),e&2){let i,t=E();c((i=t.registerForm.get("name"))!=null&&i.hasError("required")?0:-1)}}function re(e,o){e&1&&(r(0,"span",8),d(1),l(2,"translate"),a()),e&2&&(n(),f(p(2,1,"pages.auth.register.personal.errors.email-required")))}function ae(e,o){e&1&&(r(0,"span",8),d(1),l(2,"translate"),a()),e&2&&(n(),f(p(2,1,"pages.auth.register.personal.errors.email-invalid")))}function oe(e,o){if(e&1&&_(0,re,3,3,"span",8)(1,ae,3,3,"span",8),e&2){let i,t=E();c((i=t.registerForm.get("email"))!=null&&i.hasError("required")?0:(i=t.registerForm.get("email"))!=null&&i.hasError("email")||(i=t.registerForm.get("email"))!=null&&i.hasError("pattern")?1:-1)}}function se(e,o){e&1&&(r(0,"span",8),d(1),l(2,"translate"),a()),e&2&&(n(),f(p(2,1,"pages.auth.register.personal.errors.backend-email")))}function le(e,o){e&1&&(r(0,"span",8),d(1),l(2,"translate"),a()),e&2&&(n(),f(p(2,1,"pages.auth.register.personal.errors.phone-required")))}function pe(e,o){e&1&&(r(0,"span",8),d(1),l(2,"translate"),a()),e&2&&(n(),f(p(2,1,"pages.auth.register.personal.errors.phone-invalid")))}function me(e,o){if(e&1&&_(0,le,3,3,"span",8)(1,pe,3,3,"span",8),e&2){let i,t=E();c((i=t.registerForm.get("phone"))!=null&&i.hasError("required")?0:(i=t.registerForm.get("phone"))!=null&&i.hasError("pattern")?1:-1)}}function ue(e,o){e&1&&(r(0,"span",8),d(1),l(2,"translate"),a()),e&2&&(n(),f(p(2,1,"pages.auth.register.personal.errors.backend-phone")))}function de(e,o){e&1&&(r(0,"span"),d(1,"Loading..."),a())}function ce(e,o){e&1&&(r(0,"span"),d(1),l(2,"translate"),a()),e&2&&(n(),f(p(2,1,"pages.auth.register.button")))}var ee=class e{_fb=b(Y);_authService=b(W);_router=b(P);_languageService=b(Q);_alertService=b(J);_translate=b(K);currentLang$=this._languageService.currentLanguage$;registerForm;isLoading=F(!1);shakeState=F("idle");formSubmitted=F(!1);backendErrors={email:"",phone:""};ngOnInit(){this.initForm()}initForm(){this.registerForm=this._fb.group({name:["",[v.required]],email:["",[v.required,v.required,v.email,v.pattern(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/)]],phone:["",[v.required,v.pattern(/^((\+20)|0)?1[0125][0-9]{8}$/)]]})}passwordMatchValidator(o,i){return t=>{let s=t.get(o),u=t.get(i);u?.value&&s?.value!==u.value?u.setErrors({mismatch:!0}):u?.setErrors(null)}}submition(){if(this.formSubmitted.set(!0),this.backendErrors={email:"",phone:""},this.registerForm.invalid){this.registerForm.markAllAsTouched(),this.triggerShakeAnimation();return}this.isLoading.set(!0);let o={name:this.registerForm.get("name")?.value,email:this.registerForm.get("email")?.value,phone:this.registerForm.get("phone")?.value};this._authService.register(o).subscribe({next:i=>{if(this.isLoading.set(!1),i.message==="User Successfully Registered"){this._alertService.showNotification({imagePath:"./common/settings.webp",translationKeys:{title:"Registration_successful"}}),this.registerForm.reset();let t="";this.currentLang$.subscribe(s=>t=s),this._router.navigate(["/",t,"login"])}},error:i=>{this.isLoading.set(!1);let t=i?.error?.errors||{},s=[],u={email:"email_already",phone:"phone_already"};for(let x in u)t[x]&&s.push(this._translate.instant(u[x]));s.length===0&&s.push(this._translate.instant("something_went_wrong")),this._alertService.showNotification({translationKeys:{title:"register_filed"},messages:s}),this.triggerShakeAnimation(),this.triggerShakeAnimation()},complete:()=>{setTimeout(()=>{this._alertService.hide()},2e3)}})}onNameFocus(){this.registerForm.get("name")?.markAsTouched()}onEmailFocus(){this.registerForm.get("email")?.markAsTouched()}onPhoneFocus(){this.registerForm.get("phone")?.markAsTouched()}triggerShakeAnimation(){this.shakeState.set("shake"),setTimeout(()=>{this.shakeState.set("idle")},400)}static \u0275fac=function(i){return new(i||e)};static \u0275cmp=T({type:e,selectors:[["app-register"]],decls:36,vars:40,consts:[[1,"flex","md:p-4","flex-col","md:flex-row","gap-6","md:gap-12","py-12","w-full","max-w-7xl","mx-auto"],[1,"flex","px-4","flex-1","flex-col","gap-4","w-full","md:w-1/2","lg:w-1/3"],["novalidate","",3,"ngSubmit","formGroup"],[1,"flex","flex-col","mb-2"],[1,""],["formControlName","name","type","text","id","name",1,"general-input","w-full","border","border-gray-300","rounded-lg","px-4","py-3","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"focus","placeholder"],[1,"error-container"],["formControlName","email","type","email","id","email",1,"general-input","w-full","border","border-gray-300","rounded-lg","px-4","py-3","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"focus","placeholder"],[1,"error-message"],["formControlName","phone","type","text","id","phone",1,"general-input","w-full","border","border-gray-300","rounded-lg","px-4","py-3","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"focus","placeholder"],[1,"flex","justify-between","items-center"],["type","submit",1,"general-btn","bg-blue-600","text-white","py-2","px-16","rounded-lg","hover:bg-blue-700","transition-colors",3,"disabled"],[1,"have-account",3,"routerLink"],[1,"hidden","md:flex","flex-1","justify-center","items-start","w-full","md:w-1/2","lg:w-2/3"],["loading","eager","fetchpriority","high","src","assets/profile/profile.jpg",1,"w-full","max-h-[577px]","object-cover","rounded-[30px]",3,"alt"]],template:function(i,t){if(i&1&&(r(0,"div",0)(1,"div",1)(2,"form",2),y("ngSubmit",function(){return t.submition()}),r(3,"div",3)(4,"div",4)(5,"input",5),l(6,"translate"),y("focus",function(){return t.onNameFocus()}),a()(),r(7,"div",6),_(8,ne,1,1),a()(),r(9,"div",3)(10,"div",4)(11,"input",7),l(12,"translate"),y("focus",function(){return t.onEmailFocus()}),a()(),r(13,"div",6),_(14,oe,2,1)(15,se,3,3,"span",8),a()(),r(16,"div",3)(17,"div",4)(18,"input",9),l(19,"translate"),y("focus",function(){return t.onPhoneFocus()}),a()(),r(20,"div",6),_(21,me,2,1)(22,ue,3,3,"span",8),a()(),r(23,"div",10)(24,"button",11),l(25,"translate"),_(26,de,2,0,"span")(27,ce,3,3,"span"),a(),r(28,"a",12),l(29,"async"),l(30,"translate"),d(31),l(32,"translate"),a()()()(),r(33,"div",13),R(34,"img",14),l(35,"translate"),a()()),i&2){let s,u,x;g("@formAnimation",void 0),n(2),g("formGroup",t.registerForm)("@inputAnimation",void 0)("@shake",t.shakeState()),n(3),g("placeholder",p(6,22,"pages.auth.register.personal.name-placeholder")),n(3),c((s=t.registerForm.get("name"))!=null&&s.touched&&((s=t.registerForm.get("name"))!=null&&s.invalid)?8:-1),n(3),g("placeholder",p(12,24,"pages.auth.register.personal.email-placeholder")),n(3),c((u=t.registerForm.get("email"))!=null&&u.touched&&((u=t.registerForm.get("email"))!=null&&u.invalid)?14:-1),n(),c(t.backendErrors.email?15:-1),n(3),g("placeholder",p(19,26,"pages.auth.register.personal.phone-placeholder")),n(3),c((x=t.registerForm.get("phone"))!=null&&x.touched&&((x=t.registerForm.get("phone"))!=null&&x.invalid)?21:-1),n(),c(t.backendErrors.phone?22:-1),n(2),A("opacity-50",t.isLoading()),g("disabled",t.isLoading()),k("aria-label",p(25,28,"pages.auth.register.submit-button-aria-label")),n(2),c(t.isLoading()?26:27),n(2),g("routerLink",I(38,te,p(29,30,t.currentLang$))),k("aria-label",p(30,32,"pages.auth.register.already-account-text")),n(3),L(" ",p(32,34,"pages.auth.register.already-account")," "),n(3),B("alt",p(35,36,"pages.auth.register.image_alt")),g("@imageAnimation",void 0)}},dependencies:[q,N,H,U,Z,z,G,$,j,O,V,M],styles:[".have-account[_ngcontent-%COMP%]{color:#37a6de;font-family:Alexandria;font-size:clamp(18px,2.5vw,23px);font-style:normal;font-weight:500;line-height:1;text-decoration-line:underline;text-decoration-style:solid;text-decoration-skip-ink:auto;text-decoration-thickness:auto;text-underline-offset:auto;text-underline-position:from-font;text-transform:capitalize;transition:color .3s ease}.have-account[_ngcontent-%COMP%]:hover{color:#5db5df;text-decoration-thickness:2px}"],data:{animation:[C("formAnimation",[S(":enter",[m({opacity:0,transform:"translateY(20px)"}),h("500ms ease-out",m({opacity:1,transform:"translateY(0)"}))])]),C("inputAnimation",[S(":enter",[X("input, label, div, .error-container",[m({opacity:0,transform:"translateY(10px)"}),D(80,[h("400ms ease-out",m({opacity:1,transform:"translateY(0)"}))])],{optional:!0})])]),C("imageAnimation",[S(":enter",[m({opacity:0,transform:"scale(0.8)"}),h("700ms ease-out",m({opacity:1,transform:"scale(1)"}))])]),C("shake",[w("idle",m({transform:"translateX(0)"})),w("shake",m({transform:"translateX(0)"})),S("idle => shake",[h("50ms",m({transform:"translateX(-10px)"})),h("100ms",m({transform:"translateX(10px)"})),h("100ms",m({transform:"translateX(-10px)"})),h("100ms",m({transform:"translateX(10px)"})),h("50ms",m({transform:"translateX(0)"}))])])]}})};export{ee as RegisterComponent};
