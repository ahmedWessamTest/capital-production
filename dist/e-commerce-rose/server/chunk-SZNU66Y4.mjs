import './polyfills.server.mjs';
import{b as te}from"./chunk-FXIUZE2V.mjs";import{e as ne}from"./chunk-D4LSP6XO.mjs";import"./chunk-7XZGEYGO.mjs";import{b as R,c as w,d as K,e as V,i as Y,l as W,m as Z,u as U,w as H}from"./chunk-YRG62QXE.mjs";import"./chunk-666L3XN7.mjs";import{c as y,d as u,f as p,g as I,i as b,j as X,k as z,o as ie}from"./chunk-VP43NVKH.mjs";import{$c as ee,Aa as N,Ab as s,E as C,Fa as f,La as k,M as c,Ma as d,Oa as $,Rc as O,Sa as h,Sc as q,W as B,Xa as o,Ya as r,Za as L,Zc as J,_c as Q,bb as v,c as E,cb as A,db as D,ea as x,ia as P,kb as m,kc as M,lb as _,mb as F,oc as j,qc as G,ub as T,va as n,zb as l}from"./chunk-UQC3G75Y.mjs";import"./chunk-X2SEQXRR.mjs";var ae=e=>["/",e,"forgot-password"],re=e=>["/",e,"register"];function le(e,i){e&1&&(o(0,"span",23),m(1),l(2,"translate"),r()),e&2&&(n(),_(s(2,1,"pages.auth.login.login-form.errors.login-required")))}function se(e,i){e&1&&(o(0,"span",23),m(1),l(2,"translate"),r()),e&2&&(n(),_(s(2,1,"pages.auth.login.login-form.errors.login-invalid")))}function pe(e,i){if(e&1&&f(0,le,3,3,"span",23)(1,se,3,3,"span",23),e&2){let a,t=A();h((a=t.loginForm.get("email"))!=null&&a.hasError("required")?0:(a=t.loginForm.get("email"))!=null&&a.hasError("pattern")?1:-1)}}function me(e,i){e&1&&(o(0,"span",23),m(1),l(2,"translate"),r()),e&2&&(n(),_(s(2,1,"pages.auth.login.login-form.errors.password-required")))}function de(e,i){e&1&&(o(0,"span",23),m(1),l(2,"translate"),r()),e&2&&(n(),_(s(2,1,"pages.auth.login.login-form.errors.password-minlength")))}function ge(e,i){if(e&1&&f(0,me,3,3,"span",23)(1,de,3,3,"span",23),e&2){let a,t=A();h((a=t.loginForm.get("password"))!=null&&a.hasError("required")?0:(a=t.loginForm.get("password"))!=null&&a.hasError("minlength")?1:-1)}}function ue(e,i){e&1&&(B(),o(0,"svg",15),L(1,"path",24),r())}function ce(e,i){e&1&&(o(0,"span"),m(1,"Loading..."),r())}function fe(e,i){e&1&&(m(0),l(1,"translate")),e&2&&F(" ",s(1,1,"pages.auth.login.login-form.button")," ")}var oe=class e{destroy$=new E;_fb=c(U);_authService=c(ne);_router=c(O);_languageService=c(ie);_alertService=c(te);_translate=c(J);_PLATFORM_ID=c(P);currentLang$=this._languageService.currentLanguage$;loginForm;isLoading=x(!1);isChecked=x(!1);shakeState=x("idle");formSubmitted=x(!1);ngOnInit(){this.initForm()}initForm(){this.loginForm=this._fb.group({email:["",[w.required,w.pattern(/(^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$)|(^(\+2|0)(10|12|15)\d{8}$)/)]],password:["",[w.required,w.minLength(8)]]})}loggedInSuccessfully(i){this.isLoading.set(!1);let a="";this.currentLang$.pipe(C(this.destroy$)).subscribe(t=>a=t),i.access_token?(this._alertService.showNotification({translationKeys:{title:"Login_successful"}}),this.loginForm.reset(),i.password===""?this._router.navigate(["/",a,"set-password"]):this._router.navigate(["/",a,"home"]),G(this._PLATFORM_ID)&&localStorage.setItem("isPassword",i.password===""?"false":"true")):(i?.error?.includes("Deleted")?this._alertService.showNotification({translationKeys:{title:"account_deleted"}}):this._alertService.showNotification({translationKeys:{title:"register_filed"}}),this.triggerShakeAnimation())}loginSuccessfully(i){this.isLoading.set(!1);let a="Login failed. Please try again.";this._alertService.showNotification({translationKeys:{title:this._translate.instant("Login_failed")}}),this.triggerShakeAnimation()}submition(){if(this.formSubmitted.set(!0),this.loginForm.invalid){this.loginForm.markAllAsTouched(),this.triggerShakeAnimation();return}this.isLoading.set(!0),this._authService.login(this.loginForm.value).pipe(C(this.destroy$)).subscribe({next:i=>{this.loggedInSuccessfully(i)},error:i=>{this.loginSuccessfully(i)},complete:()=>{setTimeout(()=>{this._alertService.hide()},2e3)}})}loginWithGoogle(){this._authService.signInWithGoogle().pipe(C(this.destroy$)).subscribe({next:i=>{this.loggedInSuccessfully(i)},error:i=>{this.loginSuccessfully(i)},complete:()=>{setTimeout(()=>{this._alertService.hide()},2e3)}})}toggleCheckbox(){this.isChecked.set(!this.isChecked())}onLoginInputFocus(){this.loginForm.get("loginInput")?.markAsTouched()}onPasswordFocus(){this.loginForm.get("password")?.markAsTouched()}triggerShakeAnimation(){this.shakeState.set("shake"),setTimeout(()=>{this.shakeState.set("idle")},500)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static \u0275fac=function(a){return new(a||e)};static \u0275cmp=N({type:e,selectors:[["app-login"]],decls:46,vars:53,consts:[[1,"flex","flex-col","md:flex-row","gap-6","md:gap-12","py-12","w-full","max-w-7xl","mx-auto"],[1,"flex","px-4","flex-1","flex-col","gap-4","w-full","md:w-1/2","lg:w-1/3"],["novalidate","",3,"ngSubmit","formGroup"],[1,"flex","flex-col","mb-2"],[1,""],["formControlName","email","type","text","id","email",1,"general-input","w-full","border","border-gray-300","rounded-lg","px-4","py-3","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"focus","placeholder"],[1,"error-container"],["formControlName","password","type","password","id","password",1,"general-input","w-full","border","border-gray-300","rounded-lg","px-4","py-3","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"focus","placeholder"],["type","button",1,"flex","items-center","justify-center","w-full","sm:w-auto","gap-2","px-4","py-2","border","border-gray-300","rounded-lg","shadow-sm","bg-white","text-gray-700","hover:bg-gray-50","hover:shadow-md","transition","duration-200",3,"click"],["src","https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg","alt","Google",1,"w-5","h-5"],[1,"font-medium"],[1,"flex","mx-2","justify-between","items-center","mb-6"],[1,"inline-flex","items-center","cursor-pointer","space-x-2"],["type","checkbox",1,"peer","hidden",3,"change","checked"],[1,"w-5","h-5","rounded","border","border-gray-400","flex","items-center","justify-center","peer-checked:bg-transparent","peer-checked:border-gray-600"],["fill","none","stroke","currentColor","stroke-width","2","viewBox","0 0 24 24",1,"w-4","h-4","text-gray-600"],[1,"text-gray-800","text-[14px]","md:text-lg"],[1,"forget-password",3,"routerLink"],[1,"flex","justify-between","items-center"],["type","submit",1,"general-btn","bg-blue-600","text-white","py-2","px-16","rounded-lg","hover:bg-blue-700","transition-colors",3,"disabled"],[1,"have-account",3,"routerLink"],[1,"flex","flex-1","justify-center","items-start","w-full","md:w-1/2","lg:w-2/3"],["loading","lazy","src","assets/profile/profile.jpg",1,"w-full","hidden","md:block","max-h-[577px]","object-cover","rounded-[30px]",3,"alt"],[1,"error-message"],["stroke-linecap","round","stroke-linejoin","round","d","M5 13l4 4L19 7"]],template:function(a,t){if(a&1&&(o(0,"div",0)(1,"div",1)(2,"form",2),v("ngSubmit",function(){return t.submition()}),o(3,"div",3)(4,"div",4)(5,"input",5),l(6,"translate"),v("focus",function(){return t.onLoginInputFocus()}),r()(),o(7,"div",6),f(8,pe,2,1),r()(),o(9,"div",3)(10,"div",4)(11,"input",7),l(12,"translate"),v("focus",function(){return t.onPasswordFocus()}),r()(),o(13,"button",8),v("click",function(){return t.loginWithGoogle()}),L(14,"img",9),o(15,"span",10),m(16),l(17,"translate"),r()(),o(18,"div",6),f(19,ge,2,1),r()(),o(20,"div",11)(21,"label",12)(22,"input",13),v("change",function(){return t.toggleCheckbox()}),r(),o(23,"div",14),f(24,ue,2,0,":svg:svg",15),r(),o(25,"span",16),m(26),l(27,"translate"),r()(),o(28,"a",17),l(29,"async"),l(30,"translate"),m(31),l(32,"translate"),r()(),o(33,"div",18)(34,"button",19),l(35,"translate"),f(36,ce,2,0,"span")(37,fe,2,3),r(),o(38,"a",20),l(39,"async"),l(40,"translate"),m(41),l(42,"translate"),r()()()(),o(43,"div",21),L(44,"img",22),l(45,"translate"),r()()),a&2){let g,S;d("@formAnimation",void 0),n(2),d("formGroup",t.loginForm)("@inputAnimation",void 0)("@shake",t.shakeState()),n(3),d("placeholder",s(6,25,"pages.auth.login.login-form.phone-number-placeholder")),n(3),h((g=t.loginForm.get("email"))!=null&&g.touched&&((g=t.loginForm.get("email"))!=null&&g.invalid)?8:-1),n(3),d("placeholder",s(12,27,"pages.auth.login.login-form.password-placeholder")),n(5),_(s(17,29,"pages.auth.login.login-form.signin-with-google")),n(3),h((S=t.loginForm.get("password"))!=null&&S.touched&&((S=t.loginForm.get("password"))!=null&&S.invalid)?19:-1),n(3),d("checked",t.isChecked()),n(2),h(t.isChecked()?24:-1),n(2),_(s(27,31,"pages.auth.login.login-form.remember-me")),n(2),d("routerLink",T(49,ae,s(29,33,t.currentLang$))),k("aria-label",s(30,35,"pages.auth.login.login-form.forgot-password")),n(3),F(" ",s(32,37,"pages.auth.login.login-form.forgot-password")," "),n(3),$("opacity-50",t.isLoading()),d("disabled",t.isLoading()),k("aria-label",s(35,39,"pages.auth.login.login-form.submit-button-aria-label")),n(2),h(t.isLoading()?36:37),n(2),d("routerLink",T(51,re,s(39,41,t.currentLang$))),k("aria-label",s(40,43,"pages.auth.login.login-form.haveAccount")),n(3),F(" ",s(42,45,"pages.auth.login.login-form.haveAccount")," "),n(3),D("alt",s(45,47,"pages.auth.login.login-image_alt")),d("@imageAnimation",void 0)}},dependencies:[j,M,ee,Q,H,Y,R,K,V,W,Z,q],styles:[".have-account[_ngcontent-%COMP%]{color:#37a6de;font-family:Alexandria;font-size:clamp(16px,2.5vw,23px);font-style:normal;text-align:center;font-weight:500;line-height:1;text-decoration-line:underline;text-decoration-style:solid;text-decoration-skip-ink:auto;text-decoration-thickness:auto;text-underline-offset:auto;text-underline-position:from-font;text-transform:capitalize;transition:color .3s ease}.have-account[_ngcontent-%COMP%]:hover{color:#5db5df;text-decoration-thickness:2px}"],data:{animation:[y("formAnimation",[b(":enter",[p({opacity:0,transform:"translateY(20px)"}),u("500ms ease-out",p({opacity:1,transform:"translateY(0)"}))])]),y("inputAnimation",[b(":enter",[X("input, label, div, .error-container",[p({opacity:0,transform:"translateY(10px)"}),z(80,[u("400ms ease-out",p({opacity:1,transform:"translateY(0)"}))])],{optional:!0})])]),y("imageAnimation",[b(":enter",[p({opacity:0,transform:"scale(0.8)"}),u("700ms ease-out",p({opacity:1,transform:"scale(1)"}))])]),y("shake",[I("idle",p({transform:"translateX(0)"})),I("shake",p({transform:"translateX(0)"})),b("idle => shake",[u("50ms",p({transform:"translateX(-10px)"})),u("100ms",p({transform:"translateX(10px)"})),u("100ms",p({transform:"translateX(-10px)"})),u("100ms",p({transform:"translateX(10px)"})),u("50ms",p({transform:"translateX(0)"}))])])]}})};export{oe as LoginComponent};
