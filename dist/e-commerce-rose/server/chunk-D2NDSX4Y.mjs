import './polyfills.server.mjs';
import{a as H,b as K,c as W}from"./chunk-LXLVBX4L.mjs";import{a as ee}from"./chunk-ZB3MPORE.mjs";import{o as X}from"./chunk-VP43NVKH.mjs";import{$c as P,Aa as x,Ab as E,Db as A,Fa as p,Ma as a,Nb as U,Oa as w,Pa as N,T as F,U as u,V as m,W as M,Xa as l,Ya as c,Za as G,Zc as Z,_c as J,aa as V,ab as _,ad as Y,bb as h,cb as s,cc as q,da as R,dc as I,ea as j,ec as S,gb as b,hb as C,ib as D,kb as g,mb as y,oc as O,ra as B,tb as $,ub as z,va as r,vb as Q,za as f,zb as L}from"./chunk-UQC3G75Y.mjs";import{a as k,b as T}from"./chunk-X2SEQXRR.mjs";var ae=["owlCarousel"],se=()=>[1,2,3,4];function le(n,t){n&1&&(l(0,"div",12)(1,"span",13),g(2,"Loading..."),c()())}function ce(n,t){if(n&1){let e=_();l(0,"div",8),p(1,le,3,0,"div",9),l(2,"div",10)(3,"img",11),h("load",function(){u(e);let o=s().$implicit,d=s();return m(d.onImageLoad(o.id))})("error",function(){u(e);let o=s().$implicit,d=s();return m(d.onImageError(o.id))}),c()()()}if(n&2){let e=s().$implicit,i=s();r(),a("ngIf",i.shouldShowLoading(e.id)),r(),w("opacity-0",i.shouldShowLoading(e.id))("opacity-100",i.isImageLoaded[e.id]),r(),a("src",e.image,B)("alt",e.alt)}}function pe(n,t){if(n&1&&p(0,ce,4,7,"ng-template",7),n&2){let e=t.$implicit;a("id",e.en_name)}}function de(n,t){n&1&&(l(0,"div",8)(1,"div",12)(2,"span",13),g(3,"Loading..."),c()()())}function ue(n,t){n&1&&p(0,de,4,0,"ng-template",14)}function me(n,t){n&1&&p(0,ue,1,0,null,6),n&2&&a("ngForOf",$(1,se))}var te=class n{constructor(t,e,i){this.languageService=t;this.cdr=e;this.dataService=i}owlCarousel;policyType=null;isRtl=!1;languageSubscription;dataSubscription;partners=j([]);isImageLoaded={};isLoading=!0;IMAGE_BASE_URL=Y.BASE_URL_IMAGE;customOptions={loop:!0,mouseDrag:!0,touchDrag:!0,pullDrag:!0,dots:!1,margin:48,navSpeed:700,smartSpeed:700,autoplay:!0,autoWidth:!1,navText:["",""],center:!1,nav:!1,rtl:this.isRtl,skip_validateItems:!0,autoplayTimeout:3e3,autoplaySpeed:700,stagePadding:0,slideBy:1,responsive:{0:{items:1,margin:12},500:{items:3,margin:12}}};ngOnInit(){this.languageSubscription=this.languageService.currentLanguage$.subscribe(t=>{this.isRtl=t==="ar",this.customOptions=T(k({},this.customOptions),{rtl:this.isRtl}),this.cdr.markForCheck()}),this.policyType&&this.loadPartnersData(this.policyType)}ngOnDestroy(){this.languageSubscription?.unsubscribe(),this.dataSubscription?.unsubscribe()}loadPartnersData(t){this.isLoading=!0;let i={medical:1,motor:2,property:3,job:5}[t];i&&(this.dataSubscription=this.dataService.getSingleCategory(i).subscribe({next:o=>{let d=(o.category.partners??[]).map(v=>({ar_name:v.ar_partner_name,en_name:v.en_partner_name,image:this.IMAGE_BASE_URL+v.partner_image,alt:`${v.en_partner_name} Logo`,id:v.id,category_id:v.category_id}));this.partners.set(d),this.isImageLoaded={},this.isLoading=!1,this.cdr.markForCheck()},error:o=>{console.error("Error fetching partners:",o),this.partners.set([]),this.isLoading=!1,this.cdr.markForCheck()}}))}onImageLoad(t){this.isImageLoaded[t]=!0,this.cdr.markForCheck()}onImageError(t){this.isImageLoaded[t]=!1,console.warn(`Failed to load image for partner ${t}`),this.cdr.markForCheck()}shouldShowLoading(t){return!this.isImageLoaded[t]}static \u0275fac=function(e){return new(e||n)(f(X),f(U),f(ee))};static \u0275cmp=x({type:n,selectors:[["app-partners-logos"]],viewQuery:function(e,i){if(e&1&&b(ae,5),e&2){let o;C(o=D())&&(i.owlCarousel=o.first)}},inputs:{policyType:"policyType"},decls:8,vars:2,consts:[["owlCarousel",""],["loading",""],["aria-label","Partners Logos Section",1,"cursor-grab","my-5","mx-5","md:mx-10","lg:mx-20"],[1,"cursor-grab","rounded-2xl","max-w-[700px]","py-6","md:py-0","min-h-[130px]","z-[1000]","shadow-lg","bg-white"],[1,"cursor-grab","flex","justify-center","items-center","min-h-[130px]"],[1,"w-full","h-full",3,"options"],[4,"ngFor","ngForOf"],["carouselSlide","",3,"id"],["role","group","aria-roledescription","slide",1,"partner-slide","h-full","flex","justify-center","items-center","px-3"],["class","w-[185px] h-[50px] bg-gray-200 animate-pulse rounded-lg flex items-center justify-center",4,"ngIf"],[1,"w-[185px]","h-[50px]","flex","items-center","justify-center","bg-transparent","relative"],["loading","lazy","decoding","async",1,"max-w-[185px]","max-h-[50px]","w-auto","h-auto","object-contain","transition-opacity","duration-300",3,"load","error","src","alt"],[1,"w-[185px]","h-[50px]","bg-gray-200","animate-pulse","rounded-lg","flex","items-center","justify-center"],[1,"text-xs","text-gray-400"],["carouselSlide",""]],template:function(e,i){e&1&&(l(0,"section",2)(1,"div",3)(2,"div",4)(3,"owl-carousel-o",5,0),p(5,pe,1,1,null,6)(6,me,1,2,"ng-template",null,1,A),c()()()()),e&2&&(r(3),a("options",i.customOptions),r(2),a("ngForOf",i.partners()))},dependencies:[W,K,H,O,I,S,P],styles:[".partner-slide[_ngcontent-%COMP%]{margin:0 auto;max-width:185px;transition:all .4s;will-change:transform;height:100px;display:flex;align-items:center;justify-content:center}  .owl-item{transition:opacity .5s ease,transform .8s ease;opacity:1!important}  .owl-stage-outer{overflow:visible}  .owl-item{display:flex;align-items:center;justify-content:center;min-height:100px}.partner-slide[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transition:opacity .3s ease-in-out;object-fit:contain;max-width:100%;max-height:100%;width:auto;height:auto}@keyframes _ngcontent-%COMP%_pulse{0%{background-color:#e5e7eb}50%{background-color:#d1d5db}to{background-color:#e5e7eb}}.animate-pulse[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse 1.5s infinite}  .owl-carousel .owl-stage{display:flex;align-items:center}  .owl-carousel .owl-item img{width:auto!important;max-width:185px;height:auto!important;max-height:50px;object-fit:contain}"],changeDetection:0})};var ge=["searchInput"],he=n=>({"border-red-500":n}),fe=(n,t)=>({"text-right":n,"text-left":t});function _e(n,t){if(n&1){let e=_();l(0,"div",11),h("click",function(){u(e);let o=s();return m(o.onSelectedValueClick())}),g(1),c()}if(n&2){let e=s();r(),y(" ",e.translate.currentLang==="ar"?e.selectedGovernorate.ar_name||e.selectedGovernorate.name:e.selectedGovernorate.en_name||e.selectedGovernorate.name," ")}}function ve(n,t){if(n&1){let e=_();l(0,"input",12,0),h("focus",function(){u(e);let o=s();return m(o.onInputFocus())})("input",function(o){u(e);let d=s();return m(d.onInputChange(o))}),c()}if(n&2){let e=s();a("ngClass",Q(4,fe,e.translate.currentLang==="ar",e.translate.currentLang==="en"))("placeholder",e.hasData?e.placeholder:"Loading...")("value",e.searchValue)("disabled",!e.hasData)}}function ye(n,t){if(n&1){let e=_();l(0,"button",13),h("click",function(){u(e);let o=s();return m(o.clearSelection())}),g(1," \u2716 "),c()}}function xe(n,t){n&1&&(l(0,"div",17),g(1),L(2,"translate"),c()),n&2&&(r(),y(" ",E(2,1,"pages.motor_policy.form.no_results")," "))}function we(n,t){if(n&1){let e=_();l(0,"button",20),h("click",function(){let o=u(e).$implicit,d=s(3);return m(d.selectGovernorate(o))}),g(1),c()}if(n&2){let e=t.$implicit,i=s(3);N(i.getButtonClasses(e)),r(),y(" ",i.translate.currentLang==="ar"?e.ar_name||e.name:e.en_name||e.name," ")}}function be(n,t){if(n&1&&(l(0,"div",18),p(1,we,2,3,"button",19),c()),n&2){let e=s(2);r(),a("ngForOf",e.filteredGovernorates)("ngForTrackBy",e.trackByFn)}}function Ce(n,t){if(n&1&&(l(0,"div",14),p(1,xe,3,3,"div",15)(2,be,2,2,"div",16),c()),n&2){let e=s();r(),a("ngIf",e.filteredGovernorates.length===0),r(),a("ngIf",e.filteredGovernorates.length>0)}}function De(n,t){n&1&&(l(0,"div",21)(1,"div",22),G(2,"div",23),g(3),L(4,"translate"),c()()),n&2&&(r(3),y(" ",E(4,1,"pages.motor_policy.form.loading")," "))}var ne=class n{constructor(t,e){this.elementRef=t;this.translate=e}placeholder="Select Option";governorates=[];displayProperty="name";valueProperty="id";selectedValue=null;showError=!1;selected=new V;focused=new V;searchInput;filteredGovernorates=[];selectedGovernorate=null;isDropdownOpen=!1;searchValue="";ngOnInit(){this.initializeData()}ngOnChanges(t){t.governorates&&this.initializeData(),t.selectedValue&&this.selectedValue&&this.setSelectedValue(this.selectedValue)}initializeData(){this.governorates&&this.governorates.length>0?(this.filteredGovernorates=[...this.governorates],this.selectedValue&&this.setSelectedValue(this.selectedValue)):this.filteredGovernorates=[]}setSelectedValue(t){let e=this.governorates.find(i=>i[this.valueProperty]===t||i.id===t||i===t);e&&(this.selectedGovernorate=e,this.searchValue=this.getDisplayValue(e))}onDocumentClick(t){this.elementRef.nativeElement.contains(t.target)||(this.isDropdownOpen=!1,!this.selectedGovernorate&&this.searchValue&&(this.searchValue=""))}onEscapeKey(t){this.isDropdownOpen=!1,!this.selectedGovernorate&&this.searchValue&&(this.searchValue="")}onSelectedValueClick(){this.isDropdownOpen=!0,this.filteredGovernorates=[...this.governorates],setTimeout(()=>{this.searchInput&&(this.searchInput.nativeElement.focus(),this.searchValue="")})}toggleDropdown(){this.isDropdownOpen=!this.isDropdownOpen,this.isDropdownOpen&&(this.filteredGovernorates=[...this.governorates],this.selectedGovernorate&&(this.searchValue=""),setTimeout(()=>{this.searchInput&&this.searchInput.nativeElement.focus()}))}onInputFocus(){this.focused.emit(),this.isDropdownOpen=!0,(!this.searchValue||this.selectedGovernorate)&&(this.filteredGovernorates=[...this.governorates])}onInputChange(t){let e=t.target;this.searchValue=e.value,this.searchValue||(this.selectedGovernorate=null),this.filteredGovernorates=this.governorates.filter(i=>this.getDisplayValue(i).toLowerCase().includes(this.searchValue.toLowerCase())),this.isDropdownOpen=!0}selectGovernorate(t){this.selectedGovernorate=t,this.searchValue=this.getDisplayValue(t),this.selected.emit(t),this.isDropdownOpen=!1}clearSelection(){this.selectedGovernorate=null,this.searchValue="",this.filteredGovernorates=[...this.governorates],this.selected.emit({}),this.isDropdownOpen=!1}getDisplayValue(t){return this.translate.currentLang==="ar"?t.ar_name||t.name:t.en_name||t.name}getSelectedDisplayValue(){return this.searchValue}isSelected(t){return this.selectedGovernorate?.[this.valueProperty]===t[this.valueProperty]}getButtonClasses(t){let e="px-3 py-2 rounded-full border text-sm font-medium transition-all duration-200 hover:shadow-md focus:outline-none focus:ring-2 focus:ring-blue-300";return this.isSelected(t)?`${e} bg-blue-500 text-white border-blue-500 shadow-md`:`${e} bg-white text-gray-700 border-gray-300 hover:bg-blue-50 hover:border-blue-300`}get hasData(){return this.governorates&&this.governorates.length>0}trackByFn(t,e){return e[this.valueProperty]||e.id||t}static \u0275fac=function(e){return new(e||n)(f(R),f(Z))};static \u0275cmp=x({type:n,selectors:[["app-policy-drop-down"]],viewQuery:function(e,i){if(e&1&&b(ge,5),e&2){let o;C(o=D())&&(i.searchInput=o.first)}},inputs:{placeholder:"placeholder",governorates:"governorates",displayProperty:"displayProperty",valueProperty:"valueProperty",selectedValue:"selectedValue",showError:"showError"},outputs:{selected:"selected",focused:"focused"},features:[F],decls:10,vars:10,consts:[["searchInput",""],[1,"relative","w-full","h-[65px]"],[1,"flex","h-full","ps-[30px]","pe-[15px]","items-center","border","border-gray-300","rounded-[16px]","py-2","bg-white","focus-within:border-[#1D9BF0]","transition-colors",3,"ngClass"],[1,"flex-1","flex","items-center"],["class","inline-flex items-center h-full px-3 py-1 rounded-full border text-sm font-medium bg-[#1D9BF0] text-white border-[#1D9BF0] shadow-md cursor-pointer hover:bg-blue-600 transition-colors",3,"click",4,"ngIf"],["type","text","class","flex-1 outline-none w-full text-right","autocomplete","off",3,"ngClass","placeholder","value","disabled","focus","input",4,"ngIf"],["class","ml-2 text-gray-500 hover:text-red-500 transition-colors cursor-pointer","type","button",3,"click",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","width","23","height","23","viewBox","0 0 23 23","fill","none",1,"w-6","h-6","ml-2","text-gray-400","transition-transform","cursor-pointer","hover:text-gray-600",3,"click"],["d","M15.3333 10.5417L11.5 14.375L7.66667 10.5417M11.5 20.125C16.2635 20.125 20.125 16.2635 20.125 11.5C20.125 6.73655 16.2635 2.875 11.5 2.875C6.73655 2.875 2.875 6.73655 2.875 11.5C2.875 16.2635 6.73655 20.125 11.5 20.125Z","stroke","black","stroke-linecap","round","stroke-linejoin","round"],["class","absolute bg-white border max-w-2xl right-0 rounded-md mt-1 p-2 w-full shadow-lg z-50 max-h-60 overflow-y-auto",4,"ngIf"],["class","absolute bg-white border rounded-md mt-1 p-4 w-full shadow-lg z-50",4,"ngIf"],[1,"inline-flex","items-center","h-full","px-3","py-1","rounded-full","border","text-sm","font-medium","bg-[#1D9BF0]","text-white","border-[#1D9BF0]","shadow-md","cursor-pointer","hover:bg-blue-600","transition-colors",3,"click"],["type","text","autocomplete","off",1,"flex-1","outline-none","w-full","text-right",3,"focus","input","ngClass","placeholder","value","disabled"],["type","button",1,"ml-2","text-gray-500","hover:text-red-500","transition-colors","cursor-pointer",3,"click"],[1,"absolute","bg-white","border","max-w-2xl","right-0","rounded-md","mt-1","p-2","w-full","shadow-lg","z-50","max-h-60","overflow-y-auto"],["class","text-gray-500 text-center py-2",4,"ngIf"],["class","grid grid-cols-3 gap-2",4,"ngIf"],[1,"text-gray-500","text-center","py-2"],[1,"grid","grid-cols-3","gap-2"],["class","px-3 py-2 cursor-pointer rounded-full border text-sm font-medium transition-all duration-200 hover:shadow-md focus:outline-none focus:ring-2 focus:ring-blue-300","type","button",3,"class","click",4,"ngFor","ngForOf","ngForTrackBy"],["type","button",1,"px-3","py-2","cursor-pointer","rounded-full","border","text-sm","font-medium","transition-all","duration-200","hover:shadow-md","focus:outline-none","focus:ring-2","focus:ring-blue-300",3,"click"],[1,"absolute","bg-white","border","rounded-md","mt-1","p-4","w-full","shadow-lg","z-50"],[1,"text-gray-500","text-center"],[1,"animate-spin","rounded-full","h-6","w-6","border-b-2","border-[#1D9BF0]","mx-auto","mb-2"]],template:function(e,i){e&1&&(l(0,"div",1)(1,"div",2)(2,"div",3),p(3,_e,2,1,"div",4)(4,ve,2,7,"input",5),c(),p(5,ye,2,0,"button",6),M(),l(6,"svg",7),h("click",function(){return i.toggleDropdown()}),G(7,"path",8),c()(),p(8,Ce,3,2,"div",9)(9,De,5,3,"div",10),c()),e&2&&(r(),a("ngClass",z(8,he,!i.selectedGovernorate&&i.showError)),r(2),a("ngIf",i.selectedGovernorate&&!i.isDropdownOpen),r(),a("ngIf",!i.selectedGovernorate||i.isDropdownOpen),r(),a("ngIf",i.selectedGovernorate),r(),w("rotate-180",i.isDropdownOpen),r(2),a("ngIf",i.isDropdownOpen&&i.hasData),r(),a("ngIf",!i.hasData&&i.isDropdownOpen))},dependencies:[O,q,I,S,P,J],styles:["[_nghost-%COMP%]{display:block}"]})};export{te as a,ne as b};
