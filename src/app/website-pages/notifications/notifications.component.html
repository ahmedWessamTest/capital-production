<!-- Tabs with modern glass effect -->
<div class="flex gap-1 w-full bg-gray-100 p-1 rounded-xl">
  <button
    (click)="activeTab.set('general')"
    [class]="activeTab() === 'general' ? 
      'flex-1 py-3 px-4 rounded-lg bg-white text-blue-600 font-semibold shadow-sm transition-all duration-300 ease-in-out transform' : 
      'flex-1 py-3 px-4 rounded-lg text-gray-600 font-medium hover:text-gray-800 hover:bg-white/50 transition-all duration-200'">
    {{ lang() == "ar" ? "اشعارات عامه" : "General" }}
  </button>
  <button
    (click)="activeTab.set('policies')"
    [class]="activeTab() === 'policies' ? 
      'flex-1 py-3 px-4 rounded-lg bg-white text-blue-600 font-semibold shadow-sm transition-all duration-300 ease-in-out transform' : 
      'flex-1 py-3 px-4 rounded-lg text-gray-600 font-medium hover:text-gray-800 hover:bg-white/50 transition-all duration-200'">
    {{ lang() == "ar" ? "اشعارات الوثائق" : "Policies" }}
  </button>
  <button
    (click)="activeTab.set('claims')"
    [class]="activeTab() === 'claims' ? 
      'flex-1 py-3 px-4 rounded-lg bg-white text-blue-600 font-semibold shadow-sm transition-all duration-300 ease-in-out transform' : 
      'flex-1 py-3 px-4 rounded-lg text-gray-600 font-medium hover:text-gray-800 hover:bg-white/50 transition-all duration-200'">
    {{ lang() == "ar" ? "اشعارات المطالبات" : "Claims" }}
  </button>
</div>

<!-- Modern loading skeleton -->
<div *ngIf="isLoading()" class="space-y-4 mt-6">
  <div *ngFor="let _ of [1,2,3]" class="bg-white rounded-2xl shadow-sm border border-gray-100 p-6">
    <div class="animate-pulse">
      <div class="flex justify-between items-start mb-4">
        <div class="flex items-center gap-3">
          <div class="w-3 h-3 bg-gray-200 rounded-full"></div>
          <div class="h-4 bg-gray-200 rounded-lg w-48"></div>
        </div>
        <div class="w-20 h-12 bg-gray-200 rounded-lg"></div>
      </div>
      <div class="h-4 bg-gray-200 rounded-lg w-32 mb-4"></div>
      <div class="h-10 bg-gray-200 rounded-lg w-40"></div>
    </div>
  </div>
</div>

<!-- Modern empty state -->
<div *ngIf="!isLoading() && currentTabNotification().length === 0" 
     class="text-center py-16">
  <div class="mx-auto w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mb-4">
    <svg class="w-10 h-10 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-5 5-5-5h5zm-5-2V5a2 2 0 012-2h4a2 2 0 012 2v10"></path>
    </svg>
  </div>
  <p class="text-gray-500 text-lg font-medium">{{ "pages.user_policies.no_data" | translate }}</p>
</div>

<!-- Modern notifications list -->
<div class="space-y-4 mt-6">
    @for (notification of currentTabNotification(); track notification.id) {
        <div
             [@fadeInOut]="'loaded'" 
             class="bg-white rounded-2xl shadow-sm border border-gray-100 hover:shadow-md hover:border-gray-200 transition-all duration-300 overflow-hidden group">
          
          <!-- Header section with enhanced visual hierarchy -->
          <div class="p-6 pb-4">
            <div class="flex justify-between items-start">
              <div class="flex items-start gap-3 flex-1 min-w-0">
                <!-- Modern status indicator -->
                <div class="flex-shrink-0 mt-1">
                  <div class="w-3 h-3 rounded-full bg-gradient-to-r from-blue-500 to-blue-600 shadow-sm relative">
                    <div class="absolute inset-0 rounded-full bg-blue-500 animate-ping opacity-20"></div>
                  </div>
                </div>
                
                <!-- Title with better typography -->
                <div class="min-w-0 flex-1">
                  <h3 class="text-gray-900 font-semibold text-lg leading-tight mb-1 group-hover:text-blue-700 transition-colors duration-200">
                    {{ lang() === "ar" ? notification.ar_notification_title :  notification.notification_title }}
                  </h3>
                </div>
              </div>
              
              <!-- Logo with modern styling -->
              <div class="flex-shrink-0 ml-4">
                <div class="w-20 h-12 rounded-lg  bg-gray-50 border border-gray-100">
                  <img src="/logo.png" alt="" class="w-full"/>
                </div>
              </div>
            </div>
              
              <div class="min-w-0">
                <h4 class="text-gray-400  text-lg leading-tight mb-1 group-hover:text-blue-700 transition-colors duration-200">
                  {{ getNotificationSubTitle(notification) }}
                </h4>
              </div>
          </div>
          
            <div class="min-w-0 px-9">
                  <p class="text-gray-900  text-lg leading-tight mb-1 group-hover:text-blue-700 transition-colors duration-200">
                    {{lang() === "ar" ? notification.ar_notification_text : notification.notification_text }}
                  </p>
                </div>
          <!-- Content section with improved spacing -->
          <div class="px-6 pb-4">
            <div class="inline-flex items-center gap-2 bg-gray-50 px-3 py-2 rounded-lg">
              <svg class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
              </svg>
              <span class="text-sm font-medium text-gray-600">
                <!-- {{ "pages.claims.labels.claim_date" | translate }} -->
                  {{lang() === 'ar' ? 'التاريخ':'Date'}}
              </span>
              <span class="text-sm font-semibold text-gray-900">
                {{ formatDisplayDate(notification.created_at) }}
              </span>
            </div>
            @if(activeTab() === "claims"){

              <div class="inline-flex items-center gap-2 bg-gray-50 px-3 py-2 rounded-lg">
                <svg class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
        d="M9 12h6m-6 4h6M7 4h10a2 2 0 012 2v12a2 2 0 
           01-2 2H7a2 2 0 01-2-2V6a2 2 0 
           012-2z" />
</svg>

                <span class="text-sm font-medium text-gray-600">
                  <!-- {{ "pages.claims.labels.claim_date" | translate }} -->
                    {{lang() === 'ar' ? 'رقم الطلب':'claim number'}}
                </span>
                <span class="text-sm font-semibold text-gray-900">
                  {{ getClaimNotificationNumber(notification) }}
                </span>
              </div>
            }
            @if(activeTab() !== "general"){
              <div class="inline-flex items-center gap-2 bg-gray-50 px-3 py-2 rounded-lg">
                <ng-container [ngSwitch]="getStatus(notification)">
  <!-- Active -->
  <svg *ngSwitchCase="'confirmed'" class="w-5 h-5 text-green-500" fill="currentColor" viewBox="0 0 20 20">
    <path fill-rule="evenodd" 
          d="M16.707 5.293a1 1 0 00-1.414 0L8 12.586 
             4.707 9.293a1 1 0 00-1.414 1.414l4 
             4a1 1 0 001.414 0l8-8a1 1 0 
             000-1.414z" 
          clip-rule="evenodd" />
  </svg>

  <!-- Pending -->
  <svg *ngSwitchCase="'pending'" class="w-5 h-5 text-yellow-500" fill="currentColor" viewBox="0 0 20 20">
    <path fill-rule="evenodd" 
          d="M10 18a8 8 0 100-16 8 8 0 
             000 16zm1-11a1 1 0 10-2 
             0v4a1 1 0 00.293.707l2.828 
             2.829a1 1 0 101.415-1.415L11 
             10.586V7z" 
          clip-rule="evenodd" />
  </svg>

  <!-- Inactive -->
  <svg *ngSwitchCase="'canceled'" class="w-5 h-5 text-red-400" fill="currentColor" viewBox="0 0 20 20">
    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd" />
  </svg>

  <!-- Default -->
  <svg *ngSwitchDefault class="w-5 h-5 text-gray-300" fill="currentColor" viewBox="0 0 20 20">
    <circle cx="10" cy="10" r="8"/>
  </svg>
</ng-container>

                <span class="text-sm font-medium text-gray-600">
                  <!-- {{ "pages.claims.labels.claim_date" | translate }} -->
                    {{lang() === 'ar' ? 'الحاله':'active status'}}
                </span>
                <span class="text-sm font-semibold text-gray-900">
                  {{ lang() === "en" ?  getStatus(notification) : getArabicStatus(getStatus(notification)) }}
                </span>
              </div>
            }
          </div>
      
          <!-- Action section with modern button -->
           @if (activeTab() !== "general" 
   && (activeTab() === "policies" 
   || (activeTab() === "claims" && !notification?.notification_title?.includes('Update')))) {
              <div class="px-6 pb-6">
                <button
                  (click)="notificationRedirect(notification)"
                  class="inline-flex  items-center gap-2 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-semibold py-3 px-6 rounded-xl shadow-sm hover:shadow-md transition-all duration-200 transform hover:-translate-y-0.5 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2"
                  >
                 <span>{{getNotificationLabel(notification)}}</span>
                  <svg [class.rotate-180]="lang() === 'ar'" class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                  </svg>
                </button>
              </div>
           }
        </div>
    }
</div>