<div class="flex overflow-hidden flex-col md:flex-row gap-6 md:gap-12 py-12 w-full max-w-7xl mx-auto">
    <div class="flex px-4 flex-1 flex-col gap-4 w-full md:w-1/2 lg:w-1/3">
      <!-- Container for skeleton and form -->
      <div class="loader-container">
        <!-- Skeleton Loader -->
        @if (isLoading()) {
          <div class="flex flex-col gap-4" @skeletonAnimation>
            <div class="h-8 w-3/4 bg-gray-200 rounded animate-pulse"></div>
            <div class="h-4 w-full bg-gray-200 rounded animate-pulse"></div>
            <div class="h-12 w-full bg-gray-200 rounded-lg animate-pulse"></div>
            <div class="h-12 w-full bg-gray-200 rounded-lg animate-pulse"></div>
            <div class="flex justify-between">
              <div class="h-10 w-1/3 bg-gray-200 rounded-lg animate-pulse"></div>
              <div class="h-10 w-1/3 bg-gray-200 rounded-lg animate-pulse"></div>
            </div>
          </div>
        }
        <!-- Form -->
        @if (!isLoading()) {
          <form
            [formGroup]="passwordForm"
            (ngSubmit)="onPasswordSubmit()"
            novalidate
            @formAnimation
            [@shake]="shakeState()"
            [attr.aria-label]="'pages.edit-password.form-aria-label' | translate"
          >
            <!-- Header -->
            <h2 class="text-3xl font-bold text-gray-800 mb-6 text-center">{{ 'pages.edit-password.header' | translate }}</h2>
  
            <!-- Success and Error Messages -->
            @if (errorMessage()) {
              <div class="text-red-600 text-center mb-4">{{ errorMessage() }}</div>
            }
            @if (successMessage()) {
              <div class="text-green-600 text-center mb-4">{{ successMessage() }}</div>
            }
  
            <!-- New Password Field -->
            <div class="flex flex-col mb-2">
              <div>
                <input
                  formControlName="newPassword"
                  type="password"
                  id="newPassword"
                  class="general-input w-full border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-blue-500"
                  [placeholder]="'pages.edit-password.new-password-placeholder' | translate"
                  (focus)="passwordForm.get('newPassword')?.markAsTouched()"
                />
              </div>
              <div class="error-container">
                @if (passwordForm.get('newPassword')?.touched && passwordForm.get('newPassword')?.invalid) {
                  @if (passwordForm.get('newPassword')?.hasError('required')) {
                    <span class="error-message">{{ 'pages.edit-password.errors.new-password-required' | translate }}</span>
                  } @else if (passwordForm.get('newPassword')?.hasError('minlength')) {
                    <span class="error-message">{{ 'pages.edit-password.errors.new-password-minlength' | translate }}</span>
                  }
                }
              </div>
            </div>
  
            <!-- Confirm New Password Field -->
            <div class="flex flex-col mb-2">
              <div>
                <input
                  formControlName="confirmPassword"
                  type="password"
                  id="confirmPassword"
                  class="general-input w-full border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-blue-500"
                  [placeholder]="'pages.edit-password.confirm-password-placeholder' | translate"
                  (focus)="passwordForm.get('confirmPassword')?.markAsTouched()"
                />
              </div>
              <div class="error-container">
                @if (passwordForm.get('confirmPassword')?.touched && passwordForm.get('confirmPassword')?.invalid) {
                  @if (passwordForm.get('confirmPassword')?.hasError('required')) {
                    <span class="error-message">{{ 'pages.edit-password.errors.confirm-password-required' | translate }}</span>
                  } @else if (passwordForm.get('confirmPassword')?.hasError('passwordMismatch')) {
                    <span class="error-message">{{ 'pages.edit-password.errors.password-mismatch' | translate }}</span>
                  }
                }
              </div>
            </div>
  
            <!-- Update Password Button -->
            <div class="flex justify-between items-center">
              <button
                class="general-btn"
                type="submit"
                [disabled]="passwordForm.invalid || isUpdating()"
                [class.opacity-50]="isUpdating()"
                [attr.aria-label]="'pages.edit-password.submit-button-aria-label' | translate"
              >
                @if (isUpdating()) {
                  <span>{{ 'pages.edit-password.updating' | translate }}</span>
                } @else {
                  {{ 'pages.edit-password.update-password' | translate }}
                }
              </button>
              <button
                (click)="goBackToProfile()"
                class="general-btn !bg-gray-300 !text-gray-800"
                [attr.aria-label]="'pages.edit-password.back-to-profile-aria-label' | translate"
              >
                {{ 'pages.edit-password.back-to-profile' | translate }}
              </button>
            </div>
          </form>
        }
      </div>
    </div>
  
    <div class="flex flex-1 justify-center items-start w-full md:w-1/2 lg:w-2/3">
      <img
        src="assets/profile/profile.jpg"
        [alt]="'pages.edit-password.image_alt' | translate"
        class="w-full hidden md:block max-h-[577px] object-cover rounded-[30px]"
        @imageAnimation
      />
    </div>
  </div>
  